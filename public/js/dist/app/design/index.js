define("dist/app/design/index",["$","./compimg","./resize","../../lib/cmp/smartmenu","../../lib/util/dom/dnd","../../lib/util/base","../../lib/util/class","../../lib/util/event","../../lib/util/aspect","../../lib/util/attribute","./menu","./styleobj","../../lib/util/dom/action","./css","../../lib/util/bom/browser","./drag","./range","./colorpicker","./menufunc","../../lib/cmp/dialog/dialog","../../lib/cmp/overlay","../../lib/util/dom/position","../../lib/util/dom/iframe-shim","../../lib/cmp/widget","../../lib/cmp/daparser","../../lib/cmp/auto-render","../../lib/cmp/mask","../../lib/util/dom/sticky","../../lib/util/dom/scroll","../../lib/util/dom/wheel","../../lib/cmp/dialog/tpl/dialog","./scene","./data","../../lib/util/dom/sortable"],function(a){var b=a("$"),c=a("./compimg"),d=a("../../lib/util/dom/action"),e=a("../../lib/cmp/dialog/dialog"),f=a("./scene"),g=(a("./data"),a("../../lib/util/dom/sortable"),1);b(function(){var a=b(".design"),h=b("#pageManage .content-list"),i=null,j=null,k=b("#styleAnimation");d.listen({createImg:function(){j=new e({hasMask:{hideOnClick:!0},content:b("#img-dialog").html(),width:560,height:360,closable:!1,title:""}).show().after("hide",function(){this.destroy()}),j.clickType="create"},createBg:function(){i=new e({hasMask:{hideOnClick:!0},content:b("#bg-dialog").html(),width:560,height:360,closable:!1,title:"","z-index":99999999}).show().after("hide",function(){this.destroy()})},dialogTab:function(a,b){if(!b.hasClass("active")){var c=b.addClass("active").index();b.siblings().removeClass("active");var d=b.parent().parent().find(".content-row");d.hide().eq(c).show()}},bgModify:function(b,c){""==c.attr("src")?a.css("background",c.css("backgroundColor")):a.css("background","url("+c.attr("src")+")"),i.hide()},textModify:function(a,c){var d=b("<input type='text' value='"+c.text()+"'/>");c.parent().append(d).click(),c.hide(),d.focus().blur(function(){c.text(d.val()).show(),d.blur=null,d.remove()})},changeScene:function(a,b){if(!b.hasClass("active")){var c=b.siblings(".active").removeClass("active");f.changePage(c,b),b.addClass("active"),k.hide()}},addNewScene:function(){f.onePageContentCreate()},addImgComp:function(a,b){var d=b.find("img");j&&"create"==j.clickType&&(new c({container:".design",id:"CompImg-"+g++,width:d.width(),height:d.height(),src:d.attr("src")}),j.hide())},pageDelete:function(){if(h.find("li").size()>1){var a=h.find("li.active"),b=a.index();b=1>b?1:b-1,f.deletePage(a),h.find("li").eq(b).click(),a.remove()}},pageClone:function(){var a=h.find("li.active");f.clonePage(a),h.find("li").last().click()},selectTemplate:function(a,b){b.attr("data-id")},templateTab:function(a,b){var c=b.parent();c.hasClass("active")||(c.addClass("active").siblings().removeClass("active"),b.parents(".content-1").find(".content-list").hide().eq(c.index()).show())},saveScene:function(){var a=h.find("li.active");f.onePageContentSave(a),alert("保存成功")}}),f.init(),window.onbeforeunload=function(){return""}})}),define("dist/app/design/compimg",["$","./resize","../../lib/cmp/smartmenu","../../lib/util/dom/dnd","../../lib/util/base","../../lib/util/class","../../lib/util/event","../../lib/util/aspect","../../lib/util/attribute","./menu","./styleobj","../../lib/util/dom/action","./css","../../lib/util/bom/browser","./drag","./range","./colorpicker","./menufunc","../../lib/cmp/dialog/dialog","../../lib/cmp/overlay","../../lib/util/dom/position","../../lib/util/dom/iframe-shim","../../lib/cmp/widget","../../lib/cmp/daparser","../../lib/cmp/auto-render","../../lib/cmp/mask","../../lib/util/dom/sticky","../../lib/util/dom/scroll","../../lib/util/dom/wheel","../../lib/cmp/dialog/tpl/dialog"],function(a,b,c){var d=a("$");a("./resize"),a("../../lib/cmp/smartmenu");var e=a("../../lib/util/dom/dnd"),f=a("./menu"),g='<li class="comp-resize comp-rotate drag" data-action="liClick" title="按住鼠标进行拖动，点击鼠标进行编辑">                        <div class="element-box">                            <div class="element-box-contents">                                <img src="../css/image/dog.jpeg" alt=""/>                            </div>                        </div>                        <div class="bar bar-rotate bar-radius bar-touch" data-type="1"></div>                        <div class="bar bar-line"></div>                        <div class="bar bar-n bar-touch" data-type="2"></div>                        <div class="bar bar-s bar-touch" data-type="3"></div>                        <div class="bar bar-e bar-touch" data-type="4"></div>                        <div class="bar bar-w bar-touch" data-type="5"></div>                        <div class="bar bar-ne bar-radius bar-touch" data-type="6"></div>                        <div class="bar bar-nw bar-radius bar-touch" data-type="7"></div>                        <div class="bar bar-se bar-radius bar-touch" data-type="8"></div>                        <div class="bar bar-sw bar-radius bar-touch" data-type="9"></div>                        <!--line: 上：2，下：3，右：4，左：5  point：7 6 8 9-->                    </li>',h=function(a){var b={container:".container",id:"",width:110,height:110,src:"",top:0,left:0,dataId:null,background:"rgb(255,255,255)",opacity:100,borderWidth:0,borderRadius:0,borderType:0,borderColor:"rgb(0,0,0)",transform:0,shadowSize:0,shadowOffset:0,shadowColor:"rgb(0,0,0)",animateType:"",animateTime:1,animateDelay:0,animateTimes:1,animateInfinite:!1};b=d.extend({},b,a),this.init(b)};h.prototype={constructor:h,init:function(a){this.id=a.id,this.$ct=d(a.container),this.$elemet=d(g),this.$elemet.attr("id",this.id),this.$ct.append(this.$elemet);var b=this.$elemet.find(".element-box");this.$elemet.css({width:a.width+"px",height:a.height+"px",top:a.top+"px",left:a.left+"px",transform:"rotateZ("+a.transform+"deg)",zIndex:a.zIndex}).find("img").attr("src",a.src),console.log(a),b[0].style.borderWidth=(a.borderWidth||0)+"px",b.css({"border-style":a.borderType||"solid","border-radius":(a.borderRadius||0)+"%","border-color":a.borderColor,"animation-duration":a.animateTime+"s","animation-delay":a.animateDelay+"s",background:a.background,"animation-iteration-count":a.animateInfinite?"infinite":""+a.animateTimes,"box-shadow":a.shadowSize+"px "+a.shadowSize+"px "+a.shadowOffset+"px "+a.shadowColor}).attr("data-animation",a.animateType).addClass("animated "+a.animateType),a.dataId&&this.$elemet.attr("data-id",a.dataId),this.bindElementEvent(a.container),this.bindClickEvent()},bindElementEvent:function(a){this.$elemet.find("div.bar").bindResize({container:a}),new e({element:a+" .drag",container:a,except:".bar",parentIsRelative:!0}),this.$elemet.smartMenu(f.contextMenu,{name:this.id})},bindClickEvent:function(){this.$elemet.on("mousedown",function(){d(this).addClass("selected").find("div.bar").show(),d(this).siblings().removeClass("selected").find("div.bar").hide()})}},c.exports=h}),define("dist/app/design/resize",["$"],function(a){function b(a,b){function d(a){var b,c,d=50,e=30,n=a.clientX,v=a.clientY,w=0,x=0;switch(m){case"1":var y=0;y=0>v-t?180*Math.atan((n-s)/(t-v))/Math.PI:n-s>0?180*Math.atan((v-t)/(n-s))/Math.PI+90:180*Math.atan((s-n)/(v-t))/Math.PI+180,console.log(y),f.css({transform:"rotateZ("+y+"deg)"});break;case"2":x=l-v+h,c=j+(v-h),p>c?(x=j+l-p,c=p):"",e>x?(x=e,c=j-x+l):"",f.height(x),f.css({top:c-p+"px"});break;case"3":x=l+v-h,e>x?(x=e,c=j-x+l):"",x+j>r?x=r-j:"",f.height(x);break;case"4":w=k+n-g,d>w?(w=d,b=i-w+k):"",w+i>q?w=q-i:"",f.width(w);break;case"5":w=k-n+g,b=i+(n-g),o>b?(w=i+k-o,b=o):"",d>w?(w=d,b=i-w+k):"",f.width(w),f.css({left:b-o+"px"});break;case"6":w=k+n-g,d>w?(w=d,b=i-w+k):"",w+i>q?w=q-i:"",x=l-v+h,c=j+(v-h),p>c?(x=j+l-p,c=p):"",e>x?(x=e,c=j-x+l):"",a.ctrlKey&&(x=u*w,w=x/u,c=j-x+l),f.width(w),f.height(x),f.css({top:c-p+"px"});break;case"7":w=k-n+g,x=l-v+h,b=i+(n-g),c=j+(v-h),o>b?(w=i+k-o,b=o):"",p>c?(x=j+l-p,c=p):"",d>w?(w=d,b=i-w+k):"",e>x?(x=e,c=j-x+l):"",a.ctrlKey&&(x=u*w,w=x/u,c=j-x+l,b=i-w+k),f.width(w),f.height(x),f.css({left:b-o+"px",top:c-p+"px"});break;case"8":w=k+n-g,x=l+v-h,d>w?(w=d,b=i-w+k):"",e>x?(x=e,c=j-x+l):"",w+i>q?w=q-i:"",x+j>r?x=r-j:"",a.ctrlKey&&(x=u*w),f.width(w),f.height(x);break;case"9":w=k-n+g,b=i+(n-g),o>b?(w=i+k-o,b=o):"",d>w?(w=d,b=i-w+k):"",x=l+v-h,e>x?(x=e,c=j-x+l):"",x+j>r?x=r-j:"",a.ctrlKey&&(x=u*w),f.width(w),f.height(x),f.css({left:b-o+"px"})}}function e(){a.releaseCapture?(a.releaseCapture(),a.onmousemove=a.onmouseup=null):c(document).unbind("mousemove",d).unbind("mouseup",e)}var f=c(a.parentNode),g=0,h=0,i=0,j=0,k=0,l=0,m=a.getAttribute("data-type"),n=c(b.container),o=0,p=0,q=0,r=0,s=0,t=0,u=0;c(a).bind("mousedown",function(b){o=n.offset().left,p=n.offset().top,q=o+n.width(),r=p+n.height(),g=b.clientX,h=b.clientY,k=f.width(),l=f.height(),u=l/k,i=o+f[0].offsetLeft,j=p+f[0].offsetTop,s=i+k/2,t=j+l/2,a.setCapture?(a.setCapture(),a.onmousemove=function(a){d(a||event)},a.onmouseup=e):c(document).bind("mousemove",d).bind("mouseup",e),b.preventDefault()})}var c=a("$");c.fn.bindResize=function(a){var d={container:".container"};d=c.extend({},d,a),c(this).each(function(){b(this,d)})},c.fn.rotationDegrees=function(){var a=this.css("-webkit-transform")||this.css("-moz-transform")||this.css("-ms-transform")||this.css("-o-transform")||this.css("transform");if("string"==typeof a&&"none"!==a)var b=a.split("(")[1].split(")")[0].split(","),c=b[0],d=b[1],e=Math.round(Math.atan2(d,c)*(180/Math.PI));else var e=0;return e}}),define("dist/lib/cmp/smartmenu",["$"],function(a){var b=a("$"),c=b(document).data("func",{});b.smartMenu=b.noop,b.fn.smartMenu=function(a,d){var e=b("body"),f={name:"",offsetX:2,offsetY:2,textLimit:6,beforeShow:b.noop,afterShow:b.noop},g=b.extend(f,d||{}),h=function(d){var e=d||a,f=d?Math.random().toString():g.name,i="",j="smart_menu_";return b.isArray(e)&&e.length&&(i='<div id="smartMenu_'+f+'" class="'+j+'box"><div class="'+j+'body"><ul class="'+j+'ul">',b.each(e,function(a,d){a&&(i=i+'<li class="'+j+'li_separate">&nbsp;</li>'),b.isArray(d)&&b.each(d,function(a,d){var e=d.text,f="",k="",l=Math.random().toString().replace(".","");if(e){e.length>g.textLimit&&(e=e.slice(0,g.textLimit)+"…",k=' title="'+d.text+'"'),f=b.isArray(d.data)&&d.data.length?'<li class="'+j+'li" data-hover="true">'+h(d.data)+'<a href="javascript:" class="'+j+'a"'+k+' data-key="'+l+'"><i class="'+j+'triangle"></i>'+e+"</a></li>":'<li class="'+j+'li"><a href="javascript:" class="'+j+'a"'+k+' data-key="'+l+'">'+e+"</a></li>",i+=f;var m=c.data("func");m[l]=d.func,c.data("func",m)}})}),i+="</ul></div></div>"),i},i=function(){var a="#smartMenu_",d="smart_menu_",e=b(a+g.name);return e.size()?e:(b("body").append(h()),b(a+g.name+" a").bind("click",function(){var a=b(this).attr("data-key"),d=c.data("func")[a];return b.isFunction(d)&&d.call(c.data("trigger")),b.smartMenu.hide(),!1}),b(a+g.name+" li").each(function(){var a=b(this).attr("data-hover"),c=d+"li_hover";b(this).hover(function(){var e=b(this).siblings("."+c);e.removeClass(c).children("."+d+"box").hide(),e.children("."+d+"a").removeClass(d+"a_hover"),a&&(b(this).addClass(c).children("."+d+"box").show(),b(this).children("."+d+"a").addClass(d+"a_hover"))})}),b(a+g.name))};return b(this).each(function(){this.oncontextmenu=function(a){b.isFunction(g.beforeShow)&&g.beforeShow.call(this),a=a||window.event,a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation(),b.smartMenu.hide();var d=c.scrollTop(),e=i();return e?(e.css({display:"block",left:a.clientX+g.offsetX,top:a.clientY+d+g.offsetY}),c.data("target",e),c.data("trigger",this),b.isFunction(g.afterShow)&&g.afterShow.call(this),!1):void 0}}),e.data("bind")||e.bind("click",b.smartMenu.hide).data("bind",!0),this},b.extend(b.smartMenu,{hide:function(){var a=c.data("target");a&&"block"===a.css("display")&&a.hide()},remove:function(){var a=c.data("target");a&&a.remove()}})}),define("dist/lib/util/dom/dnd",["$","../base","../class","../event","../aspect","../attribute"],function(a,b,c){function d(){var a=v.element,b=v.get("proxy"),c=v.get("visible"),d=E();z&&(l=setInterval(function(){A===!1&&(A=n,clearInterval(l),l=n,h())},100)),c===!1&&a.css("visibility","hidden"),b.css({zIndex:d,visibility:"visible",cursor:"move"}).focus(),y={},s=!1,w=b,b[0].setCapture&&(b[0].setCapture(),b.bind("losecapture",h)),v.trigger("dragstart",y,w,x,v)}function e(a){var b,c,d,e,f,g,h=v.get("container"),i=v.element,j=v.get("proxy"),l=v.get("axis"),n=v.get("grid");if(z&&(A=!0,clearTimeout(m),m=setTimeout(function(){A=!1},100)),h){var o=h.outerWidth(),p=h.outerHeight(),s=h.offset();v.get("parentIsRelative")?(b=0,d=b+o-j.outerWidth(),c=0,e=c+p-j.outerHeight(),a.pageX=a.pageX-s.left,a.pageY=a.pageY-s.top):(b=s.left,d=b+o-j.outerWidth(),c=s.top,e=c+p-j.outerHeight())}else b=q.scrollLeft(),d=b+r.width()-j.outerWidth(),c=q.scrollTop(),e=c+r.height()-j.outerHeight();if("x"===l?c=e=i.offset().top:"y"===l&&(b=d=i.offset().left),f=a.pageX-t,g=a.pageY-u,console.log(t+" "+u),n){var y=j.offset();f=y.left+k(f-y.left,n),g=y.top+k(g-y.top,n)}w.css({left:Math.min(Math.max(f,b),d),top:Math.min(Math.max(g,c),e)}),v.trigger("drag",w,x,v)}function f(){var a=(v.element,v.get("drop"));if(v.get("parentIsRelative"))var b=w.position().left+t,c=w.position().top+u;else b=w.offset().left+t,c=w.offset().top+u;null!==a&&(null===x?a&&o.each(a,function(a,d){return i(d,b,c)===!0?(w.css("cursor","copy"),w.focus(),x=o(d),v.trigger("dragenter",w,x,v),!1):void 0}):i(x,b,c)===!1?(w.css("cursor","move"),w.focus(),v.trigger("dragleave",w,x,v),x=null):v.trigger("dragover",w,x,v))}function g(){var a=v.element,b=v.get("proxy"),c=v.get("revert");null!==x&&(i(x,b)===!1&&c===!1&&(v.get("parentIsRelative")?(b.css("left",x[0].offsetLeft+(x.outerWidth()-b.outerWidth())/2),b.css("top",x[0].offsetTop+(x.outerHeight()-b.outerHeight())/2)):(b.css("left",x.offset().left+(x.outerWidth()-b.outerWidth())/2),b.css("top",x.offset().top+(x.outerHeight()-b.outerHeight())/2))),v.trigger("drop",y,a,x,v))}function h(){null!==w?(w.css("cursor","default"),w.focus(),w=null,g(),j(),v.trigger("dragend",v.element,x,v),v=null,x=null):s===!0&&(v.get("proxy").remove(),v.set("proxy",null),s=!1,v=null)}function i(a,b,c){var d=c;return"number"!=typeof b?("number"!=typeof d&&(d=0),o(a).offset().left-d<=o(b).offset().left&&o(a).offset().left+o(a).outerWidth()>=o(b).offset().left+o(b).outerWidth()-d&&o(a).offset().top-d<=o(b).offset().top&&o(a).offset().top+o(a).outerHeight()>=o(b).offset().top+o(b).outerHeight()-d):o(a).offset().left<=b&&o(a).offset().left+o(a).outerWidth()>=b&&o(a).offset().top<=c&&o(a).offset().top+o(a).outerHeight()>=c}function j(){var a=v.element,b=v.get("proxy"),c=v.get("drop"),d=v.get("revert"),e=v.get("revertDuration"),f=v.get("visible"),g=b.offset().left-a.offset().left,h=b.offset().top-a.offset().top;d===!0||null===x&&null!==c?(a.attr("style",a.data("style")),f===!1&&a.css("visibility","hidden"),v.get("animate")!==!1?b.animate({left:a.offset().left,top:a.offset().top},e,function(){a.css("visibility",""),b.remove()}):b.remove()):("relative"===a.css("position")?(g=(isNaN(parseInt(a.css("left")))?0:parseInt(a.css("left")))+g,h=(isNaN(parseInt(a.css("top")))?0:parseInt(a.css("top")))+h):"absolute"===a.css("position")?v.get("parentIsRelative")?(g=b[0].offsetLeft,h=b[0].offsetTop):(g=b.offset().left,h=b.offset().top):a.css("position",v.get("position")||"relative"),f===!1?(a.css({left:g,top:h,visibility:""}),b.remove()):v.get("animate")!==!1?a.animate({left:g,top:h},e,function(){b.remove()}):b.remove(),v.get("keepTop")===!0&&a.css("zIndex",E())),v.set("proxy",null)}function k(a,b){return parseInt(a/b)*b}var l,m,n,o=a("$"),p=a("../base"),q=o(document),r=o(window),s=!1,t=0,u=0,v=null,w=null,x=null,y={},z=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,A=!1,B=1e4,C=p.extend({attrs:{element:{getter:function(a){return"string"==typeof a?o(a):a?a:null}},proxy:{getter:function(a){return"string"==typeof a?o(a):a?a:null}},handler:"",container:{getter:function(a){return"string"==typeof a?o(a):a?a:null}},drop:{getter:function(a){return"string"==typeof a?o(a):a?a:null}},disabled:!1,except:null,visible:!1,animate:!0,keepTop:!0,proxyParent:null,parentIsRelative:!1},events:{},initialize:function(){C.superclass.initialize.apply(this,arguments),this.render()},render:function(a){var b=this,c=a?o(a):this.get("element"),d=this.get("handler")?c.find(this.get("handler")):c,e=this.get("except");return e&&c.find(e).mousedown(function(){return!1}),c.find("input,textarea,button,select").css("cursor","default").mousedown(function(){return!1}),d.each(function(a,d){var e,f=c.eq(a),g=b.get("proxy");o.isFunction(g)&&(e=g.call(b,f,d)),d=o(d),d.data("dnd",o.extend({},b,{index:a,element:f,handler:d,proxy:e})).css("cursor","move").attr("data-draggable",!0),f.data("style",f.attr("style")||{})}),this},enable:function(a){var b=this.get("element"),c=a?"string"==typeof a?b.find(a):a:b;return c.each(function(a,b){o(b).css("cursor","move").attr("data-draggable",!0)}),this},disable:function(a){var b=this.get("element"),c=a?"string"==typeof a?b.find(a):a:b;return c.each(function(a,b){o(b).css("cursor","default").attr("data-draggable","")}),this},destroy:function(a){var b=this.get("element"),c=a?"string"==typeof a?b.find(a):a:b;return c.each(function(a,b){o(b).removeData("dnd").css("cursor","default").removeAttr("data-draggable")}),this},_onChangeDisabled:function(a){var b=this.get("handler");b.each(function(b,c){o(c).css("cursor",a?"default":"move").attr("data-draggable",a?"":!0)})}});C.open=function(){o(document).on("mousedown mousemove mouseup touchstart touchmove touchend",D)},C.close=function(){o(document).off("mousedown mousemove mouseup touchstart touchmove touchend",D)};var D=function(a){var b,c,g,i,j=a.pageX||a.originalEvent.targetTouches&&a.originalEvent.targetTouches[0].pageX,k=a.pageY||a.originalEvent.targetTouches&&a.originalEvent.targetTouches[0].pageY;switch(a.type){case"mousedown":case"touchstart":if((!a.which||1===a.which)&&(i=o(a.target),b=i.data("dnd"),b||(i=i.closest("[data-draggable]"),b=i.data("dnd")),b&&b.get("disabled")===!1&&i.attr("data-draggable")&&(v=b,g=v.element,v.set("proxy",v.proxy?v.proxy:g.clone()),c=v.get("proxy"),v.trigger("beforedrag",v)!==!1))){var l=0,m=0;v.get("parentIsRelative")?(j-=v.get("container").offset().left,k-=v.get("container").offset().top,t=j-g[0].offsetLeft,u=k-g[0].offsetTop,l=g[0].offsetLeft,m=g[0].offsetTop):(t=j-g.offset().left,u=k-g.offset().top,l=g.offset().left,m=g.offset().top),s=!0,c.css({position:"absolute",margin:0,left:l,top:m,visibility:"hidden"}).data("proxy",!0),c.appendTo(v.get("proxyParent")?v.get("proxyParent"):g.parent()),v.get("scroll")!==!0&&a.preventDefault()}break;case"mousemove":case"touchmove":s===!0&&d(),null!==w&&(e({pageX:j,pageY:k}),f());break;case"mouseup":case"touchend":h()}},E=function(a){return function(){return a++}}(B);C.open(),c.exports=C}),define("dist/lib/util/base",["./class","./event","./aspect","./attribute"],function(a,b,c){function d(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d="_onChange"+e(c);a[d]&&a.on("change:"+c,a[d])}}function e(a){return a.charAt(0).toUpperCase()+a.substring(1)}var f=a("./class"),g=a("./event"),h=a("./aspect"),i=a("./attribute"),j=f.create({Implements:[g,h,i],initialize:function(a){this.initAttrs(a),d(this,this.attrs)},destroy:function(){this.off();for(var a in this)this.hasOwnProperty(a)&&delete this[a];this.destroy=function(){}}});c.exports=j}),define("dist/lib/util/class",[],function(a,b,c){function d(a){return this instanceof d||!l(a)?void 0:g(a)}function e(){}function f(a){var b,c;for(b in a)c=a[b],d.Mutators.hasOwnProperty(b)?d.Mutators[b].call(this,c):this.prototype[b]=c}function g(a){return a.extend=d.extend,a.implement=f,a}function h(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){if(c&&-1===m(c,d))continue;"prototype"!==d&&(a[d]=b[d])}}c.exports=d,d.extend=function(a){return a||(a={}),a.Extends=this,d.create(a)},d.create=function(a,b){function c(){a.apply(this,arguments),this.constructor===c&&this.initialize&&this.initialize.apply(this,arguments)}return l(a)||(b=a,a=null),b||(b={}),a||(a=b.Extends||d),b.Extends=a,a!==d&&h(c,a,a.StaticsWhiteList),f.call(c,b),g(c)};var i=Object.__proto__?function(a){return{__proto__:a}}:function(a){return e.prototype=a,new e};d.Mutators={Extends:function(a){var b=this.prototype,c=i(a.prototype);h(c,b),c.constructor=this,this.prototype=c,this.superclass=a.prototype},Implements:function(a){k(a)||(a=[a]);for(var b,c=this.prototype;b=a.shift();)h(c,b.prototype||b)},Statics:function(a){h(this,a)}};var j=Object.prototype.toString,k=Array.isArray||function(a){return"[object Array]"===j.call(a)},l=function(a){return"[object Function]"===j.call(a)},m=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}}),define("dist/lib/util/event",[],function(a,b,c){function d(){}function e(a,b,c,d){var e;if(a)for(var f=0,g=a.length;g>f;f+=2)e=a[f].apply(a[f+1]||c,b),e===!1&&d.status&&(d.status=!1)}var f=/\s+/;c.exports=d,d.prototype.on=function(a,b,c){var d,e,g;if(!b)return this;for(d=this.__events||(this.__events={}),a=a.split(f);e=a.shift();)g=d[e]||(d[e]=[]),g.push(b,c);return this},d.prototype.off=function(a,b,c){var d,e,h,i;if(!(d=this.__events))return this;if(!(a||b||c))return delete this.__events,this;for(a=a?a.split(f):g(d);e=a.shift();)if(h=d[e])if(b||c)for(i=h.length-2;i>=0;i-=2)b&&h[i]!==b||c&&h[i+1]!==c||h.splice(i,2);else delete d[e];return this},d.prototype.trigger=function(a){var b,c,d,g,h,i,j=[],k={status:!0};if(!(b=this.__events))return this;for(a=a.split(f),h=1,i=arguments.length;i>h;h++)j[h-1]=arguments[h];for(;c=a.shift();)(d=b.all)&&(d=d.slice()),(g=b[c])&&(g=g.slice()),e(g,j,this,k),e(d,[c].concat(j),this,k);return k.status},d.mixTo=function(a){a=a.prototype||a;var b=d.prototype;for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};var g=Object.keys;g||(g=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b})}),define("dist/lib/util/aspect",[],function(a,b,c){function d(a,b,c,d){for(var g,i,j=b.split(h);g=j.shift();)i=e(this,g),i.__isAspected||f.call(this,g),this.on(a+":"+g,c,d);return this}function e(a,b){var c=a[b];if(!c)throw new Error("Invalid method name: "+b);return c}function f(a){var b=this[a];this[a]=function(){var c=Array.prototype.slice.call(arguments),d=["before:"+a].concat(c);if(this.trigger.apply(this,d)!==!1){var e=b.apply(this,arguments),f=["after:"+a,e].concat(c);return this.trigger.apply(this,f),e}},this[a].__isAspected=!0}var g={before:function(a,b,c){return d.call(this,"before",a,b,c)},after:function(a,b,c){return d.call(this,"after",a,b,c)}};c.exports=g;var h=/\s+/}),define("dist/lib/util/attribute",[],function(a,b,c){function d(a){return"[object String]"===u.call(a)}function e(a){return"[object Function]"===u.call(a)}function f(a){return null!==a&&a===a.window}function g(a){if(!a||"[object Object]"!==u.call(a)||a.nodeType||f(a))return!1;try{if(a.constructor&&!v.call(a,"constructor")&&!v.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}var c;if(t)for(c in a)return v.call(a,c);for(c in a);return void 0===c||v.call(a,c)}function h(a){if(!a||"[object Object]"!==u.call(a)||a.nodeType||f(a)||!a.hasOwnProperty)return!1;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function i(a,b){var c,d;for(c in b)if(b.hasOwnProperty(c)){if(d=b[c],w(d))d=d.slice();else if(g(d)){var e=a[c];g(e)||(e={}),d=i(e,d)}a[c]=d}return a}function j(a,b,c){for(var d=[],e=b.constructor.prototype;e;)e.hasOwnProperty("attrs")||(e.attrs={}),l(c,e.attrs,e),h(e.attrs)||d.unshift(e.attrs),e=e.constructor.superclass;for(var f=0,g=d.length;g>f;f++)i(a,p(d[f]))}function k(a,b){i(a,p(b,!0))}function l(a,b,c,d){for(var e=0,f=a.length;f>e;e++){var g=a[e];c.hasOwnProperty(g)&&(b[g]=d?b.get(g):c[g])}}function m(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d,f=b[c].value;e(f)&&(d=c.match(y))&&(a[d[1]](n(d[2]),f),delete b[c])}}function n(a){var b=a.match(z),c=b[1]?"change:":"";return c+=b[2].toLowerCase()+b[3]}function o(a,b,c){var d={silent:!0};a.__initializingAttrs=!0;for(var e in c)c.hasOwnProperty(e)&&b[e].setter&&a.set(e,c[e],d);delete a.__initializingAttrs}function p(a,b){var c={};for(var d in a){var e=a[d];c[d]=!b&&g(e)&&q(e,A)?e:{value:e}}return c}function q(a,b){for(var c=0,d=b.length;d>c;c++)if(a.hasOwnProperty(b[c]))return!0;return!1}function r(a){return null===a||(d(a)||w(a))&&0===a.length||h(a)}function s(a,b){if(a===b)return!0;if(r(a)&&r(b))return!0;var c=u.call(a);if(c!==u.call(b))return!1;switch(c){case"[object String]":return a===String(b);case"[object Number]":return a!==+a?b!==+b:0===a?1/a===1/b:a===+b;case"[object Date]":case"[object Boolean]":return+a===+b;case"[object RegExp]":return a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.ignoreCase===b.ignoreCase;case"[object Array]":var d=a.toString(),e=b.toString();return-1===d.indexOf("[object")&&-1===e.indexOf("[object")&&d===e}if("object"!=typeof a||"object"!=typeof b)return!1;if(g(a)&&g(b)){if(!s(x(a),x(b)))return!1;for(var f in a)if(a[f]!==b[f])return!1;return!0}return!1}var t,u=Object.prototype.toString,v=Object.prototype.hasOwnProperty;!function(){function a(){this.x=1}var b=[];a.prototype={valueOf:1,y:1};for(var c in new a)b.push(c);t="x"!==b[0]}();var w=Array.isArray||function(a){return"[object Array]"===u.call(a)},x=Object.keys;x||(x=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b});var y=/^(on|before|after)([A-Z].*)$/,z=/^(Change)?([A-Z])(.*)/,A=["value","getter","setter","readOnly"],B={initAttrs:function(a){var b=this.attrs={},c=this.propsInAttrs||[];j(b,this,c),a&&k(b,a),o(this,b,a),m(this,b),l(c,this,b,!0)},get:function(a){var b=this.attrs[a]||{},c=b.value;return b.getter?b.getter.call(this,c,a):c},set:function(a,b,c){var e={};d(a)?e[a]=b:(e=a,c=b),c||(c={});var f=c.silent,h=c.override,j=this.attrs,k=this.__changedAttrs||(this.__changedAttrs={});for(a in e)if(e.hasOwnProperty(a)){var l=j[a]||(j[a]={});if(b=e[a],l.readOnly)throw new Error("This attribute is readOnly: "+a);l.setter&&(b=l.setter.call(this,b,a));var m=this.get(a);!h&&g(m)&&g(b)&&(b=i(i({},m),b)),j[a].value=b,this.__initializingAttrs||s(m,b)||(f?k[a]=[b,m]:this.trigger("change:"+a,b,m,a))}return this},change:function(){var a=this.__changedAttrs;if(a){for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];this.trigger("change:"+b,c[0],c[1],b)}delete this.__changedAttrs}return this},_isPlainObject:g};c.exports=B}),define("dist/app/design/menu",["$","./styleobj","../../lib/util/dom/action","../../lib/util/base","../../lib/util/class","../../lib/util/event","../../lib/util/aspect","../../lib/util/attribute","./css","../../lib/util/bom/browser","./drag","./range","./colorpicker","./menufunc","../../lib/cmp/dialog/dialog","../../lib/cmp/overlay","../../lib/util/dom/position","../../lib/util/dom/iframe-shim","../../lib/cmp/widget","../../lib/cmp/daparser","../../lib/cmp/auto-render","../../lib/cmp/mask","../../lib/util/dom/sticky","../../lib/util/dom/scroll","../../lib/util/dom/wheel","../../lib/cmp/dialog/tpl/dialog"],function(a,b,c){var d=a("$"),e=a("./styleobj"),f=a("./menufunc"),g=[[{text:"编辑",func:function(){f.edit(this)}},{text:"样式",func:function(){new e(this,"style",f.getStyle(this))}},{text:"动画",func:function(){new e(this,"animation",f.getStyle(this))}},{text:"复制",func:function(){window.cloneNode=f.getStyle(this)}},{text:"删除",func:function(){d(this).remove()}}]];c.exports={contextMenu:g}}),define("dist/app/design/styleobj",["$","../../lib/util/dom/action","../../lib/util/base","../../lib/util/class","../../lib/util/event","../../lib/util/aspect","../../lib/util/attribute","./css","../../lib/util/bom/browser","./drag","./range","./colorpicker"],function(a,b,c){function d(){l.find("h5").drag("options",{handle:".style-animation",drag:".style-animation"}),l.find("input").bind("click",function(){this.focus()}),l.find(".percent-select i").rangefunc({}),l.find(".color-select").colorpicker().on("changeColor",function(a){return f(this).css("background",a.color.toString("rgb")),f(this).parent().find(".ipt").val(a.color.toString("rgb")).trigger("input"),!1}),w.change(function(){""==f(this).val()||"none"==f(this).val()?l.find(".animate-panel").hide():l.find(".animate-panel").show()})}function e(){l.on("input",function(a){if("input"===a.target.tagName.toLowerCase()){var b=f(a.target),c=b.attr("data-type"),d=f(i).find(".element-box");if("borderColor"!=c&&"background"!=c&&"shadowColor"!=c){var e=window.parseInt(b.attr("data-max")),g=window.parseInt(b.val());g>=e?(b.val(e),g=e):0>g?(b.val(0),g=0):"";var j=b.parent().find("i"),k=g/e*100;switch(j.attr("data-value",k).css("left",k*(j.parent().width()-j.width())/100+"px"),c){case"opacity":f(i).css("opacity",g/100);break;case"borderWidth":d.css("border-width",g+"px");break;case"borderRadius":d.css("border-radius",g+"%").find(".element-box").css("border-radius",g+"%");break;case"transform":f(i).css("transform","rotateZ("+g+"deg)");break;case"shadowSize":new h(i).setShadow("size",g);break;case"shadowOffset":new h(i).setShadow("offset",g);break;case"animateTime":d.css({"-webkit-animation-duration":g+"s","-moz-animation-duration":g+"s","animation-duration":g+"s"});break;case"animateDelay":d.css({"-webkit-animation-delay":g+"s","-moz-animation-delay":g+"s","animation-delay":g+"s"});break;case"animateTimes":d.css({"-webkit-animation-iteration-count":g+"","-moz-animation-iteration-count":g+"","animation-iteration-count":g+""})}}else g=b.val(),"borderColor"==c?d.css("border-color",g):"background"==c?d.css("background",g):"shadowColor"==c&&new h(i).setShadow("color",g)}}).on("change",function(a){var b=f(i).find(".element-box"),c=a.target.getAttribute("data-type");"borderType"==c?b.css("border-style",f(a.target).val()):"animateType"==c&&(b.removeClass(j).addClass(f(a.target).val()),j=f(a.target).val(),b.attr("data-animation",j))}),A.on("click",function(){k?(k=!1,f(i).find(".element-box").css("animation-iteration-count",z.val())):(k=!0,f(i).find(".element-box").css("animation-iteration-count","infinite"))})}var f=a("$"),g=a("../../lib/util/dom/action"),h=a("./css");a("./drag"),a("./range"),a("./colorpicker");var i=null,j="",k=!1,l=f("#styleAnimation"),m=l.find("#background"),n=l.find("#opacity"),o=l.find("#borderWidth"),p=l.find("#borderRadius"),q=l.find("#borderColor"),r=l.find("#borderType"),s=l.find("#transform"),t=l.find("#shadowSize"),u=l.find("#shadowOffset"),v=l.find("#shadowColor"),w=l.find("#animateType"),x=l.find("#animateDelay"),y=l.find("#animateTime"),z=l.find("#animateTimes"),A=l.find("#animateInfinite");g.listen({styleAnimationChange:function(a,b){var c=b.parent();c.hasClass("active")||(c.addClass("active").siblings().removeClass("active"),l.find(".content-list").hide().eq(c.index()).show())},styleAnimationLiTab:function(a,b){b.find(".li-content").show(),b.siblings().find(".li-content").hide()},styleAnimationClose:function(){l.hide()},liClick:function(a,b){"none"!=l.css("display")&&new B(b[0],"",new h(b[0]).getStyle())},clearAllStyle:function(){n.val(100).trigger("input"),o.val(0).trigger("input"),p.val(0).trigger("input"),s.val(0).trigger("input"),t.val(0).trigger("input"),u.val(0).trigger("input"),r.val("solid"),m.val("rgb(255,255,255)"),q.val("rgb(255,255,255)"),v.val("rgb(255,255,255)")}}),d(),e();var B=function(a,b,c){var d={background:"rgb(255,255,255)",opacity:100,borderWidth:0,borderRadius:0,borderType:"solid",borderColor:"rgb(0,0,0)",transform:350,shadowSize:0,shadowOffset:0,shadowColor:"rgb(0,0,0)",animateType:"",animateTime:2,animateDelay:0,animateTimes:1,animateInfinite:!1};d=f.extend({},d,c),this.init(a,b,d)};B.prototype={constructor:B,init:function(a,b,c){i=a,this.showModuleByType(b),this.initInterfaceData(c)},showModuleByType:function(a){"style"==a?(l.find(".content-nav li").removeClass("active").eq(0).addClass("active"),l.find(".content-list").show().eq(1).hide()):"animation"==a&&(l.find(".content-nav li").removeClass("active").eq(1).addClass("active"),l.find(".content-list").show().eq(0).hide()),l.show()},initInterfaceData:function(a){m.val(a.background),n.val(a.opacity).trigger("input"),o.val(a.borderWidth).trigger("input"),p.val(a.borderRadius).trigger("input"),q.val(a.borderColor),s.val(a.transform).trigger("input"),t.val(a.shadowSize).trigger("input"),v.val(a.shadowColor),u.val(a.shadowOffset).trigger("input"),x.val(a.animateDelay).trigger("input"),z.val(a.animateTimes).trigger("input"),y.val(a.animateTime).trigger("input"),y.val(a.animateTime).trigger("input"),m.parent().find("span").css({"background-color":a.background}),q.parent().find("span").css({"background-color":a.borderColor}),v.parent().find("span").css({"background-color":a.shadowColor}),a.animateType&&"none"!=a.animateType?(w.find("option").each(function(){this.getAttribute("value")==a.animateType&&w.val(a.animateType)
}),l.find(".animate-panel").show(),j=a.animateType):(w.val(""),l.find(".animate-panel").hide()),r.val(a.borderType),a.animateInfinite?A.attr("checked",!0):A.attr("checked",!1),k=a.animateInfinite}},c.exports=B}),define("dist/lib/util/dom/action",["$","../base","../class","../event","../aspect","../attribute"],function(a){function b(a,b){var c=a.__events;d.each(c,function(a,c){d.each(c,function(a){a%2==1&&(c[a]=b)})})}function c(a,b,c){d.each(c,function(c,e){var f={};d.isFunction(e)?f.is=e:(f=e,f.is=f.is||f.callback),d.each(f,function(b,e){d.isFunction(e)&&a.on(b+":"+c,e)}),d.isFunction(f.not)&&a.on("is:"+c,function(a,c,d){b[d]={xnode:c}})})}var d=a("$"),e=a("../base"),f={dom:[],eventType:[],events:[],notEvents:[]},g="data-action",h=/\s+/,i={setActionKey:function(a){g=a,i.setActionKey=null},setActionKeySplitter:function(a){h=a,i.setActionKeySplitter=null},listen:function(a,i,j){a=a||{},i=d(i?i:document),j=j||"click";var k=d.inArray(i[0],f.dom);if(-1!==k&&f.eventType[k]!==j&&(k=-1),-1===k){f.dom.push(i[0]),f.eventType.push(j),f.events.push(new e),f.notEvents.push({}),k=f.events.length-1;var l=f.events[k],m=f.notEvents[k];c(l,m,a),d(i).on(j,function(a){var c=d(a.target),e=c,f=c.attr(g);f||(e=c.closest("["+g+"]"),f=e.attr(g)),d.each(m,function(d,f){var g=f.xnode;e[0]!==g[0]&&(b(l,c),l.trigger("not:"+d,a,g,d)&&delete m[d])}),f&&(f=f.split(h),d.each(f,function(d,f){f.length&&(b(l,c),l.trigger("before:"+f,a,e,f)&&(l.trigger("is:"+f,a,e,f),l.trigger("after:"+f,a,e,f)))}))})}else c(f.events[k],f.notEvents[k],a);return i}};return i}),define("dist/app/design/css",["$","../../lib/util/bom/browser"],function(a,b,c){var d=a("$"),e=a("../../lib/util/bom/browser"),f=function(a){this.node=a};f.prototype={constructOr:f,getStyle:function(){var a=this.node,b=a.getElementsByTagName("div")[0],c=/\-?[0-9]+\.?[0-9]*/g,f=b.style.borderWidth&&b.style.borderWidth.match(c),g=b.style.borderRadius&&b.style.borderRadius.match(c),h=a.style.transform.match(c),i=b.style.boxShadow.match(c);if(e.firefox){var j=i.splice(0);i[0]=j[3],i[1]=j[4],i[2]=j[5],i[3]=j[0],i[4]=j[1],i[5]=j[2]}var k=b.style,l=(k.webkitAnimationDuration||k.mozAnimationDuration||k.animationDuration).match(c),m=(k.webkitAnimationDelay||k.mozAnimationDelay||k.animationDelay).match(c),n=(k.webkitAnimationIterationCount||k.mozAnimationIterationCount||k.animationIterationCount).match(c);return{width:d(a).width(),height:d(a).height(),left:d(a).position().left,top:d(a).position().top,src:d(a).find("img").attr("src"),background:b.backgroundColor,opacity:window.parseInt(100*d(a).css("opacity")),borderWidth:f&&f[0]||0,borderRadius:g&&g[0]||0,borderType:b.style.borderStyle||"solid",borderColor:b.style.borderColor||"rgb(255,255,255)",transform:h&&h[0]||0,shadowSize:i&&i[4],shadowOffset:i&&i[5],shadowColor:i&&"rgb("+i[0]+","+i[1]+","+i[2]+")",animateType:b.getAttribute("data-animation"),animateTime:l&&l[0]||0,animateDelay:m&&m[0]||0,animateTimes:n&&n[0]||0,animateInfinite:"infinite"==(k.webkitAnimationIterationCount||k.mozAnimationIterationCount||k.animationIterationCount)}},setShadow:function(a,b){var c=this.node,f=c.getElementsByTagName("div")[0],g=/\-?[0-9]+\.?[0-9]*/g,h=f.style.boxShadow.match(g);if(e.firefox){var i=h.splice(0);h[0]=i[3],h[1]=i[4],h[2]=i[5],h[3]=i[0],h[4]=i[1],h[5]=i[2]}"size"===a?d(f).css("box-shadow",b+"px "+b+"px "+h[5]+"px rgb("+h[0]+","+h[1]+","+h[2]+")"):"color"===a?d(f).css("box-shadow",h[4]+"px "+h[4]+"px "+h[5]+"px "+b):"offset"===a&&d(f).css("box-shadow",h[4]+"px "+h[4]+"px "+b+"px rgb("+h[0]+","+h[1]+","+h[2]+")")},setAllStyle:function(a){var b=this.node,c="";c=c+"width:"+(a.width||0)+"px;",c=c+"height:"+(a.height||0)+"px;",c=c+"left:"+(a.left||0)+"px;",c=c+"top:"+(a.top||0)+"px;",c=c+"background:"+(a.background||"white")+";",c=c+"opacity:"+(a.opacity||1)+";",c=c+"border-radius:"+(a.borderRadius||0)+"px;",c=c+"border:"+a.borderWidth+"px "+a.borderType+" "+a.borderColor+";",c=c+"box-shadow:"+a.shadowSize+"px "+a.shadowSize+"px "+a.shadowOffset+"px "+a.shadowColor+";",c=c+"-webkit-transform: rotate("+a.transform+"deg);",c=c+"-webkit-animation-duration:"+a.animateTime+"s;",c=c+"-webkit-animation-delay:"+a.animateDelay+"s;",c=c+"-webkit-animation-iteration-count:"+a.animateTimes+";",c=c+"-webkit-animation-iteration-count:"+("infinite"==a.animateInfinite),c=c+"-moz-transform: rotate("+a.transform+"deg);",c=c+"-moz-animation-duration:"+a.animateTime+"s;",c=c+"-moz-animation-delay:"+a.animateDelay+"s;",c=c+"-moz-animation-iteration-count:"+a.animateTimes+";",c=c+"-moz-animation-iteration-count:"+("infinite"==a.animateInfinite),c=c+"transform: rotate("+a.transform+"deg);",c=c+"animation-duration:"+a.animateTime+"s;",c=c+"animation-delay:"+a.animateDelay+"s;",c=c+"animation-iteration-count:"+a.animateTimes+";",c=c+"animation-iteration-count:"+("infinite"==a.animateInfinite),b.style.cssText=c}},c.exports=f}),define("dist/lib/util/bom/browser",[],function(a,b,c){c.exports=function(){var a=!!window.ActiveXObject,b=!!window.devicePixelRatio,c={ie:a,ie6:a&&!window.XMLHttpRequest,ie7:a&&"7."===navigator.appVersion.match(/7./i),ie8:!!window.XDomainRequest,ie9:a&&1,firefox:!!document.getBoxObjectFor||"mozInnerScreenX"in window,opera:b&&!!window.opera,safari:Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,chrome:b&&!!window.chrome},d=function(){if(c.ie||c.ie6||c.ie7||c.ie8||c.ie9)return"IE";for(var a in c)if(c.hasOwnProperty(a)&&c[a]&&"is"!=a)return a;return"IE"}();return c.is=d,c}()}),define("dist/app/design/drag",["$"],function(a){function b(a,b){this.element=a,this.options=b}var c,d=a("$"),e="jquery-drag",f=window,g=f.document,h=d(g),i=d(g.body),j={handle:null,drag:null,axis:"xy",cursor:"move",min:null,max:null,zIndex:999999999,ondragbefore:d.noop,ondragstart:d.noop,ondrag:d.noop,ondragend:d.noop};d.fn.drag=function(a){var f,g,h="string"===d.type(a),i=[].slice.call(arguments,1),k=d.extend({},j);if(h&&"_"!==h[0]){if(!this.length)return;return f=d(this[0]),g=f.data(e),g||f.data(e,g=new b(f[0],k)._init()),b.prototype[a]?b.prototype[a].apply(g,i):c}return h||(k=d.extend(k,a)),this.each(function(){var a=this,c=d(a).data(e);c||d(a).data(e,c=new b(a,k)._init())})},d.fn.drag.defaults=j,b.prototype={_init:function(){var a=this,b=a.options,c=d(a.element);return a.$element=c,b.handle?c.on("mousedown taphold",b.handle,d.proxy(a._start,a)):c.on("mousedown taphold",d.proxy(a._start,a)),h.mousemove(d.proxy(a._move,a)).mouseup(d.proxy(a._end,a)).bind("touchmove",d.proxy(a._move,a)).bind("touchend",d.proxy(a._end,a)).bind("touchcancel",d.proxy(a._end,a)),a},_start:function(a){if(!this.is){var b,c,e=a.originalEvent,f=this,g=f.options,h=f.$element,j=g.handle?d(a.target).closest(g.handle):d(a.target),k=g.drag?j.closest(g.drag):h,l=e.touches?e.touches[0]:a;f.$drag=k,g.ondragbefore.call(k[0],a,f),f.zIndex=k.css("z-index"),f.cursor=i.css("cursor"),f.$drag=k.css("z-index",g.zIndex),b=k.css("position"),c=k.offset(),"static"===b?k.css("position","relative"):("fixed"===b||"absolute"===b)&&k.css(k.position()),console.log(k),f.pos={x:l.pageX,y:l.pageY,l:c.left,t:c.top},f.is=!0,f.options.cursor&&i.css("cursor",g.cursor),g.ondragstart.call(k[0],a,f),a.preventDefault()}},_move:function(a){if(this.is){var b,d,e,f,g=a.originalEvent,h=this,i=h.options,j=i.min,k=i.max,l=h.pos,m=h.$drag,n=m.parent(!0).offset(),o={},p=g.touches?g.touches[0]:a;~i.axis.indexOf("x")&&(o.left=p.pageX-l.x+l.l),~i.axis.indexOf("y")&&(o.top=p.pageY-l.y+l.t),j&&j.left!==c&&o.left<(b=j.left+n.left)&&(o.left=b),j&&j.top!==c&&o.top<(d=j.top+n.top)&&(o.top=d),k&&k.left!==c&&o.left>(e=k.left+n.left)&&(o.left=e),k&&k.top!==c&&o.top>k.top&&o.top>(f=k.top+n.top)&&(o.top=f),m.offset(o),i.ondrag.call(m[0],a,h),a.preventDefault()}},_end:function(a){if(this.is){var b=this,c=b.$drag;b.is=!1,b.options.cursor&&i.css("cursor",b.cursor),c.css("z-index",b.zIndex),b.options.ondragend.call(c[0],a,b),a.preventDefault()}},options:function(a,b){if("string"===d.type(a)&&b===c)return this.options[a];var e={};"object"===d.type(a)?e=a:e[a]=b,this.options=d.extend(this.options,e)}}}),define("dist/app/design/range",["$"],function(a){var b=a("$"),c=function(a,c){this.element=b(a),this.init(c)};c.prototype={init:function(){this.dragging=!1,this.bindElementEvent()},bindElementEvent:function(){var a,c,d=this.element,e=this,f=d.parent(),g=f.width()-d.width();d.on("mousedown",function(d){a=d.pageX,c=b(this).position().left,e.dragging||(e.dragging=!0)}),b(document).on("mousemove",function(b){if(e.dragging){var h=b.pageX,i=h-a+c;i>=g?i=g:0>i?i=0:"",d.css("left",i+"px").attr("data-value",100*i/g),f.parent().find("input").val(parseInt(i/g*parseInt(f.parent().find("input").attr("data-max")))).trigger("input")}}).on("mouseup",function(){e.dragging&&(e.dragging=!1)}),f.bind("click",function(a){var c=a.pageX-b(this).offset().left;c>=g?c=g:0>c?c=0:"",d.css("left",c+"px").attr("data-value",100*c/g),f.parent().find("input").val(parseInt(c/g*parseInt(f.parent().find("input").attr("data-max")))).trigger("input")})}},b.fn.rangefunc=function(a){this.each(function(){new c(this,a)})}}),define("dist/app/design/colorpicker",["$"],function(a){var b=a("$"),c=function(a){this.value={h:0,s:0,b:0,a:1},this.origFormat=null,a&&(void 0!==a.toLowerCase?(a+="","#"===a.charAt(0)||3!==a.length&&6!==a.length||(a="#"+a),this.setColor(a)):void 0!==a.h&&(this.value=a))};c.prototype={constructor:c,colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},_sanitizeNumber:function(a){return"number"==typeof a?a:isNaN(a)||null===a||""===a||void 0===a?1:void 0!==a.toLowerCase?parseFloat(a):1},setColor:function(a){a=a.toLowerCase(),this.value=this.stringToHSB(a)||{h:0,s:0,b:0,a:1}},stringToHSB:function(a){a=a.toLowerCase();var c=this,d=!1;return b.each(this.stringParsers,function(b,e){var f=e.re.exec(a),g=f&&e.parse.apply(c,[f]),h=e.format||"rgba";return g?(d=h.match(/hsla?/)?c.RGBtoHSB.apply(c,c.HSLtoRGB.apply(c,g)):c.RGBtoHSB.apply(c,g),c.origFormat=h,!1):!0}),d},setHue:function(a){this.value.h=1-a},setSaturation:function(a){this.value.s=a},setBrightness:function(a){this.value.b=1-a},setAlpha:function(a){this.value.a=parseInt(100*(1-a),10)/100},toRGB:function(a,b,c,d){a||(a=this.value.h,b=this.value.s,c=this.value.b),a*=360;var e,f,g,h,i;return a=a%360/60,i=c*b,h=i*(1-Math.abs(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],{r:Math.round(255*e),g:Math.round(255*f),b:Math.round(255*g),a:d||this.value.a}},toHex:function(a,b,c,d){var e=this.toRGB(a,b,c,d);return"#"+(1<<24|parseInt(e.r)<<16|parseInt(e.g)<<8|parseInt(e.b)).toString(16).substr(1)},toHSL:function(a,b,c,d){a=a||this.value.h,b=b||this.value.s,c=c||this.value.b,d=d||this.value.a;var e=a,f=(2-b)*c,g=b*c;return g/=f>0&&1>=f?f:2-f,f/=2,g>1&&(g=1),{h:isNaN(e)?0:e,s:isNaN(g)?0:g,l:isNaN(f)?0:f,a:isNaN(d)?0:d}},toAlias:function(a,b,c,d){var e=this.toHex(a,b,c,d);for(var f in this.colors)if(this.colors[f]==e)return f;return!1},RGBtoHSB:function(a,b,c,d){a/=255,b/=255,c/=255;var e,f,g,h;return g=Math.max(a,b,c),h=g-Math.min(a,b,c),e=0===h?null:g===a?(b-c)/h:g===b?(c-a)/h+2:(a-b)/h+4,e=(e+360)%6*60/360,f=0===h?0:h/g,{h:this._sanitizeNumber(e),s:f,b:g,a:this._sanitizeNumber(d)}},HueToRGB:function(a,b,c){return 0>c?c+=1:c>1&&(c-=1),1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a},HSLtoRGB:function(a,b,c,d){0>b&&(b=0);var e;e=.5>=c?c*(1+b):c+b-c*b;var f=2*c-e,g=a+1/3,h=a,i=a-1/3,j=Math.round(255*this.HueToRGB(f,e,g)),k=Math.round(255*this.HueToRGB(f,e,h)),l=Math.round(255*this.HueToRGB(f,e,i));return[j,k,l,this._sanitizeNumber(d)]},toString:function(a){switch(a=a||"rgba"){case"rgb":var b=this.toRGB();return"rgb("+b.r+","+b.g+","+b.b+")";case"rgba":var b=this.toRGB();return"rgba("+b.r+","+b.g+","+b.b+","+b.a+")";case"hsl":var c=this.toHSL();return"hsl("+Math.round(360*c.h)+","+Math.round(100*c.s)+"%,"+Math.round(100*c.l)+"%)";case"hsla":var c=this.toHSL();return"hsla("+Math.round(360*c.h)+","+Math.round(100*c.s)+"%,"+Math.round(100*c.l)+"%,"+c.a+")";case"hex":return this.toHex();case"alias":return this.toAlias()||this.toHex();default:return!1}},stringParsers:[{re:/#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),1]}},{re:/#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,format:"hex",parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16),1]}},{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(a){return[a[1],a[2],a[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"hsl",parse:function(a){return[a[1]/360,a[2]/100,a[3]/100,a[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(a){return[a[1]/360,a[2]/100,a[3]/100,a[4]]}},{re:/^([a-z]{3,})$/,format:"alias",parse:function(a){var b=this.colorNameToHex(a[0])||"#000000",c=this.stringParsers[0].re.exec(b),d=c&&this.stringParsers[0].parse.apply(this,[c]);return d}}],colorNameToHex:function(a){return"undefined"!=typeof this.colors[a.toLowerCase()]?this.colors[a.toLowerCase()]:!1}};var d={horizontal:!1,inline:!1,color:!1,format:!1,input:"input",container:!1,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},alpha:{maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:!1},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:!1}},template:'<div class="colorpicker dropdown-menu"><div class="colorpicker-saturation"><i><b></b></i></div><div class="colorpicker-hue"><i></i></div><div class="colorpicker-alpha"><i></i></div><div class="colorpicker-color"><div /></div></div>'},e=function(a,e){this.element=b(a).addClass("colorpicker-element"),this.options=b.extend({},d,this.element.data(),e),this.component=this.options.component,this.component=this.component!==!1?this.element.find(this.component):!1,this.component&&0===this.component.length&&(this.component=!1),this.container=this.options.container===!0?this.element:this.options.container,this.container=this.container!==!1?b(this.container):!1,this.input=this.element.is("input")?this.element:this.options.input?this.element.find(this.options.input):!1,this.input&&0===this.input.length&&(this.input=!1),this.color=new c(this.options.color!==!1?this.options.color:this.getValue()),this.format=this.options.format!==!1?this.options.format:this.color.origFormat,this.picker=b(this.options.template),this.picker.addClass(this.options.inline?"colorpicker-inline colorpicker-visible":"colorpicker-hidden"),this.options.horizontal&&this.picker.addClass("colorpicker-horizontal"),("rgba"===this.format||"hsla"===this.format)&&this.picker.addClass("colorpicker-with-alpha"),this.picker.on("mousedown.colorpicker touchstart.colorpicker",b.proxy(this.mousedown,this)),this.picker.appendTo(this.container?this.container:b("body")),this.input!==!1&&(this.input.on({"keyup.colorpicker":b.proxy(this.keyup,this)}),this.component===!1&&this.element.on({"focus.colorpicker":b.proxy(this.show,this)}),this.options.inline===!1&&this.element.on({"focusout.colorpicker":b.proxy(this.hide,this)})),this.component!==!1&&this.component.on({"click.colorpicker":b.proxy(this.show,this)}),this.input===!1&&this.component===!1&&this.element.on({"click.colorpicker":b.proxy(this.show,this)}),this.input!==!1&&this.component!==!1&&"color"===this.input.attr("type")&&this.input.on({"click.colorpicker":b.proxy(this.show,this),"focus.colorpicker":b.proxy(this.show,this)}),this.update(),b(b.proxy(function(){this.element.trigger("create")},this))};e.version="2.0.0-beta",e.Color=c,e.prototype={constructor:e,destroy:function(){this.picker.remove(),this.element.removeData("colorpicker").off(".colorpicker"),this.input!==!1&&this.input.off(".colorpicker"),this.component!==!1&&this.component.off(".colorpicker"),this.element.removeClass("colorpicker-element"),this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==!1||this.options.container)return!1;var a=this.container&&this.container[0]!==document.body?"position":"offset",b=this.component?this.component[a]():this.element[a]();this.picker.css({top:b.top+(this.component?this.component.outerHeight():this.element.outerHeight()),left:b.left})},show:function(a){return this.isDisabled()?!1:(this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden"),this.reposition(),b(window).on("resize.colorpicker",b.proxy(this.reposition,this)),!a||this.hasInput()&&"color"!==this.input.attr("type")||a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault()),this.options.inline===!1&&b(window.document).on({"mousedown.colorpicker":b.proxy(this.hide,this)}),void this.element.trigger({type:"showPicker",color:this.color}))},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible"),b(window).off("resize.colorpicker",this.reposition),b(document).off({"mousedown.colorpicker":this.hide}),this.update(),this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(a){return a=a||this.color.toString(this.format),this.element.data("color",a),a},updateInput:function(a){return a=a||this.color.toString(this.format),this.input!==!1&&this.input.prop("value",a),a},updatePicker:function(a){void 0!==a&&(this.color=new c(a));var b=this.options.horizontal===!1?this.options.sliders:this.options.slidersHorz,d=this.picker.find("i");return 0!==d.length?(this.options.horizontal===!1?(b=this.options.sliders,d.eq(1).css("top",b.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",b.alpha.maxTop*(1-this.color.value.a))):(b=this.options.slidersHorz,d.eq(1).css("left",b.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",b.alpha.maxLeft*(1-this.color.value.a))),d.eq(0).css({top:b.saturation.maxTop-this.color.value.b*b.saturation.maxTop,left:this.color.value.s*b.saturation.maxLeft}),this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1)),this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex()),this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format)),a):void 0},updateComponent:function(a){if(a=a||this.color.toString(this.format),this.component!==!1){var b=this.component.find("i").eq(0);b.length>0?b.css({backgroundColor:a}):this.component.css({backgroundColor:a})}return a},update:function(a){var b=this.updateComponent();return(this.getValue(!1)!==!1||a===!0)&&(this.updateInput(b),this.updateData(b)),this.updatePicker(),b},setValue:function(a){this.color=new c(a),this.update(),this.element.trigger({type:"changeColor",color:this.color,value:a})},getValue:function(a){a=void 0===a?"#000000":a;var b;return b=this.hasInput()?this.input.val():this.element.data("color"),(void 0===b||""===b||null===b)&&(b=a),b},hasInput:function(){return this.input!==!1},isDisabled:function(){return this.hasInput()?this.input.prop("disabled")===!0:!1},disable:function(){return this.hasInput()?(this.input.prop("disabled",!0),!0):!1},enable:function(){return this.hasInput()?(this.input.prop("disabled",!1),!0):!1},currentSlider:null,mousePointer:{left:0,top:0},mousedown:function(a){a.pageX||a.pageY||!a.originalEvent||(a.pageX=a.originalEvent.touches[0].pageX,a.pageY=a.originalEvent.touches[0].pageY),a.stopPropagation(),a.preventDefault();var c=b(a.target),d=c.closest("div"),e=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!d.is(".colorpicker")){if(d.is(".colorpicker-saturation"))this.currentSlider=b.extend({},e.saturation);else if(d.is(".colorpicker-hue"))this.currentSlider=b.extend({},e.hue);else{if(!d.is(".colorpicker-alpha"))return!1;this.currentSlider=b.extend({},e.alpha)}var f=d.offset();this.currentSlider.guide=d.find("i")[0].style,this.currentSlider.left=a.pageX-f.left,this.currentSlider.top=a.pageY-f.top,this.mousePointer={left:a.pageX,top:a.pageY},b(document).on({"mousemove.colorpicker":b.proxy(this.mousemove,this),"touchmove.colorpicker":b.proxy(this.mousemove,this),"mouseup.colorpicker":b.proxy(this.mouseup,this),"touchend.colorpicker":b.proxy(this.mouseup,this)}).trigger("mousemove")}return!1},mousemove:function(a){a.pageX||a.pageY||!a.originalEvent||(a.pageX=a.originalEvent.touches[0].pageX,a.pageY=a.originalEvent.touches[0].pageY),a.stopPropagation(),a.preventDefault();var b=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+((a.pageX||this.mousePointer.left)-this.mousePointer.left))),c=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((a.pageY||this.mousePointer.top)-this.mousePointer.top)));return this.currentSlider.guide.left=b+"px",this.currentSlider.guide.top=c+"px",this.currentSlider.callLeft&&this.color[this.currentSlider.callLeft].call(this.color,b/this.currentSlider.maxLeft),this.currentSlider.callTop&&this.color[this.currentSlider.callTop].call(this.color,c/this.currentSlider.maxTop),this.update(!0),this.element.trigger({type:"changeColor",color:this.color}),!1},mouseup:function(a){return a.stopPropagation(),a.preventDefault(),b(document).off({"mousemove.colorpicker":this.mousemove,"touchmove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup,"touchend.colorpicker":this.mouseup}),!1},keyup:function(a){if(38===a.keyCode)this.color.value.a<1&&(this.color.value.a=Math.round(100*(this.color.value.a+.01))/100),this.update(!0);else if(40===a.keyCode)this.color.value.a>0&&(this.color.value.a=Math.round(100*(this.color.value.a-.01))/100),this.update(!0);else{var b=this.input.val();this.color=new c(b),this.getValue(!1)!==!1&&(this.updateData(),this.updateComponent(),this.updatePicker())}this.element.trigger({type:"changeColor",color:this.color,value:b})}},b.colorpicker=e,b.fn.colorpicker=function(a){var c=arguments;return this.each(function(){var d=b(this),f=d.data("colorpicker"),g="object"==typeof a?a:{};f||"string"==typeof a?"string"==typeof a&&f[a].apply(f,Array.prototype.slice.call(c,1)):d.data("colorpicker",new e(this,g))})},b.fn.colorpicker.constructor=e}),define("dist/app/design/menufunc",["$","../../lib/util/dom/action","../../lib/util/base","../../lib/util/class","../../lib/util/event","../../lib/util/aspect","../../lib/util/attribute","../../lib/cmp/dialog/dialog","../../lib/cmp/overlay","../../lib/util/dom/position","../../lib/util/bom/browser","../../lib/util/dom/iframe-shim","../../lib/cmp/widget","../../lib/cmp/daparser","../../lib/cmp/auto-render","../../lib/cmp/mask","../../lib/util/dom/sticky","../../lib/util/dom/scroll","../../lib/util/dom/wheel","../../lib/cmp/dialog/tpl/dialog","./css"],function(a,b,c){function d(a){return new i(a).getStyle()}function e(a){k=a,j=new h({hasMask:{hideOnClick:!0},content:f("#img-dialog").html(),width:560,height:360,closable:!1,title:""}).show().after("hide",function(){this.destroy()}),j.clickType="modify"}var f=a("$"),g=a("../../lib/util/dom/action"),h=a("../../lib/cmp/dialog/dialog"),i=a("./css"),j=null,k=null;g.listen({addImgComp:function(a,b){if(j&&"modify"==j.clickType){var c=b.find("img");f(k).find("img").attr("src",c.attr("src")),j.hide()}}}),c.exports={getStyle:d,edit:e}}),define("dist/lib/cmp/dialog/dialog",["$","../overlay","../../util/dom/position","../../util/bom/browser","../../util/dom/iframe-shim","../widget","../../util/base","../../util/class","../../util/event","../../util/aspect","../../util/attribute","../daparser","../auto-render","../mask","../../util/dom/sticky","../../util/dom/scroll","../../util/dom/wheel","./tpl/dialog"],function(a,b,c){function d(a){null==a.attr("tabindex")&&a.attr("tabindex","-1"),a.css("outline","none").attr("hidefocus","true")}function e(a){var b,c=a[0].contentWindow.document;return c.body.scrollHeight&&c.documentElement.scrollHeight?b=Math.min(c.body.scrollHeight,c.documentElement.scrollHeight):c.documentElement.scrollHeight?b=c.documentElement.scrollHeight:c.body.scrollHeight&&(b=c.body.scrollHeight),b}var f=a("$"),g=a("../overlay"),h=a("../mask"),i=a("../../util/event"),j=a("../../util/dom/sticky"),k=a("../../util/dom/scroll"),l=a("./tpl/dialog"),m=300,n=9999999,o=g.extend({attrs:{template:l.render(),title:"对话框",content:{value:null,setter:function(a){return this._type=/^(https?:\/\/|\/|\.\/|\.\.\/)/.test(a)?"iframe":"",a}},hasMask:{value:!0,hideOnClick:!1},width:500,height:null,zIndex:n,fixed:!0,autoFit:!0,effect:"none",align:{selfXY:["50%","50%"],baseXY:["50%","50%"]}},events:{"click [data-action=close]":function(){return this.hide(),!1}},parseElement:function(){o.superclass.parseElement.call(this),this.contentElement=this.$('[data-role="content"]'),this.contentElement.css({background:"#fff",height:"100%",zoom:1})},setup:function(){o.superclass.setup.call(this),this._setupMask(),this._setupKeyEvents(),this._setupFocus(),d(this.element),this.get("fixed")!==!1&&j.fix(this.element),k.prevent(this.element)},_onRenderVisible:function(a){var b=this.get("effect");a?f.isFunction(b)?b.call(this,this.element):this.element.show():this.element.hide()},show:function(a){if(o.superclass.show.call(this),"iframe"===this._type?(this.get("height")||this.element.height(m),this._showIframe()):this.get("height")&&this.$(".main").height(this.get("height")-this.$(".header").outerHeight()-this.$(".footer").outerHeight()),a)for(var b in a)this.set(b,a[b]);return this},hide:function(){return"iframe"===this._type&&this.iframe&&(this.iframe.attr({src:"about:blank"}),this.iframe.remove(),this.iframe=null,this._errCount=0),o.superclass.hide.call(this),clearInterval(this._interval),delete this._interval,this},destroy:function(){return this.element.remove(),clearInterval(this._interval),o.superclass.destroy.call(this)},_onRenderHeader:function(a){this.$(".header")[a?"show":"hide"]()},_onRenderFooter:function(a){this.$(".footer")[a?"show":"hide"]()},_onRenderTitle:function(a){this.$("[data-role=title]").eq(0).html(a)},_onRenderClosable:function(a){this.$("[data-role=close]").eq(0)[a===!1?"hide":"show"]()},_onRenderContent:function(a){if("iframe"!==this._type){var b;try{b=f(a)}catch(c){b=[]}b[0]?this.contentElement.empty().append(b):this.contentElement.empty().html(a)}},_setupMask:function(){var a=this,b=function(){a.hide()};this.before("show",function(){this.set("zIndex",n),n+=2;var a=parseInt(this.get("zIndex"),10),c=this.get("hasMask");c&&(h.set("zIndex",a-1).show(),c.hideOnClick&&h.element.one("click",b))}),this.after("hide",function(){var a=this.get("hasMask");a&&(h.hide(),a.hideOnClick&&h.element.off("click",b))})},_setupFocus:function(){this.after("show",function(){this.element.focus()})},_setupKeyEvents:function(){this.delegateEvents(f(document),"keyup",function(a){27===a.keyCode&&this.get("visible")&&this.hide()})},_showIframe:function(){var a=this;this.iframe||this._createIframe(),this.iframe.attr({src:this._fixUrl(),name:"dialog-iframe"+(new Date).getTime()}),this.iframe.one("load",function(){a.get("visible")&&(a.get("autoFit")&&(clearInterval(a._interval),a._interval=setInterval(function(){a._syncHeight()},300)),a._syncHeight(),a.trigger("complete:show"))})},_fixUrl:function(){var a=this.get("content").match(/([^?#]*)(\?[^#]*)?(#.*)?/);return a.shift(),a[1]=(a[1]&&"?"!==a[1]?a[1]+"&":"?")+"t="+(new Date).getTime(),a.join("")},_createIframe:function(){var a=this;this.contentElement.empty(),this.iframe=f("<iframe>",{src:"about:blank",scrolling:"no",frameborder:"no",allowTransparency:"true",css:{border:"none",width:"100%",display:"block",height:"100%",overflow:"hidden"}}).appendTo(this.contentElement),this._errCount=0,i.mixTo(this.iframe[0]),this.iframe[0].on("close",function(){a.hide()})},_syncHeight:function(){var a;if(this.get("height"))clearInterval(this._interval),delete this._interval;else{try{a=e(this.iframe)+"px"}catch(b){this._errCount=(this._errCount||0)+1,this._errCount>=6&&(a=m,clearInterval(this._interval),delete this._interval)}this.element.css("height",a),this._setPosition(),this.element[0].className=this.element[0].className}}});c.exports=o}),define("dist/lib/cmp/overlay",["$","../util/dom/position","../util/bom/browser","../util/dom/iframe-shim","./widget","../util/base","../util/class","../util/event","../util/aspect","../util/attribute","./daparser","./auto-render"],function(a,b,c){function d(a){return g.contains(document.documentElement,a)}function e(a){g(k.blurOverlays).each(function(b,c){if(c&&c.get("visible")){for(var d=0;d<c._relativeElements.length;d++){var e=g(c._relativeElements[d])[0];if(e===a.target||g.contains(e,a.target))return}c.hide()}})}function f(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return b.splice(c,1),b}var g=a("$"),h=a("../util/dom/position"),i=a("../util/dom/iframe-shim"),j=a("./widget"),k=j.extend({attrs:{width:null,height:null,zIndex:99,visible:!1,repositionOnResize:!0,align:{selfXY:[0,0],baseElement:h.VIEWPORT,baseXY:[0,0]},parentNode:document.body},show:function(){return this.rendered||this.render(),this.set("visible",!0),this
},hide:function(){return this.set("visible",!1),this},setup:function(){var a=this;this._setupShim(),this.get("repositionOnResize")&&this._setupResize(),this.after("show",function(){a._setPosition()})},destroy:function(){return f(this,k.allOverlays),f(this,k.blurOverlays),k.superclass.destroy.call(this)},_setPosition:function(a){if(d(this.element[0])&&(a||(a=this.get("align")),a)){var b="none"===this.element.css("display");return b&&this.element.css({visibility:"hidden",display:"block"}),h.pin({element:this.element,x:a.selfXY[0],y:a.selfXY[1]},{element:a.baseElement,x:a.baseXY[0],y:a.baseXY[1]}),b&&this.element.css({visibility:"",display:"none"}),this}},_setupShim:function(){var a=new i(this.element);this.after("hide _setPosition",a.sync,a);var b=["width","height"];for(var c in b)b.hasOwnProperty(c)&&this.on("change:"+c,a.sync,a);this.before("destroy",a.destroy,a)},_setupResize:function(){k.allOverlays.push(this)},_blurHide:function(a){a=g.makeArray(a),a.push(this.element),this._relativeElements=a,k.blurOverlays.push(this)},_onRenderWidth:function(a){this.element.css("width",a)},_onRenderHeight:function(a){this.element.css("height",a)},_onRenderZIndex:function(a){this.element.css("zIndex",a)},_onRenderAlign:function(a){this._setPosition(a)},_onRenderVisible:function(a){this.element[a?"show":"hide"]()}});k.blurOverlays=[],g(document).on("mousedown",function(a){e(a)});var l,m=g(window).width(),n=g(window).height();k.allOverlays=[],g(window).resize(function(){var a=g(window).width(),b=g(window).height();(m!==a||n!==b)&&(l&&clearTimeout(l),l=setTimeout(function(){g(k.allOverlays).each(function(a,b){b&&b.get("visible")&&b._setPosition()})},80)),m=a,n=b}),c.exports=k}),define("dist/lib/util/dom/position",["$","../bom/browser"],function(a,b){function c(a){a=h(a)||{},a.nodeType&&(a={element:a});var b=h(a.element)||j;if(1!==b.nodeType)throw new Error("posObject.element is invalid.");var c={element:b,x:a.x||0,y:a.y||0},d=b===j||"VIEWPORT"===b._id;return c.offset=function(){return m?{left:0,top:0}:d?{left:k(document).scrollLeft(),top:k(document).scrollTop()}:k(b).offset()},c.size=function(){var a=k(d?window:b);return{width:a.outerWidth(),height:a.outerHeight()}},c}function d(a){a.x=e(a.x,a,"width"),a.y=e(a.y,a,"height")}function e(a,b,c){if(a+="",a=a.replace(/px/gi,""),/\D/.test(a)&&(a=a.replace(/(?:top|left)/gi,"0%").replace(/center/gi,"50%").replace(/(?:bottom|right)/gi,"100%")),-1!==a.indexOf("%")&&(a=a.replace(/(\d+(?:\.\d+)?)%/gi,function(a,d){return b.size()[c]*(d/100)})),/[+\-*\/]/.test(a))try{a=new Function("return "+a)()}catch(d){throw new Error("Invalid position value: "+a)}return g(a)}function f(a){var b=a.offsetParent();b[0]===document.documentElement&&(b=k(document.body)),n&&b.css("zoom",1);var c=b[0]===document.body?{left:0,top:0}:b.offset();return c.top+=g(b.css("border-top-width")),c.left+=g(b.css("border-left-width")),c}function g(a){return parseFloat(a,10)||0}function h(a){return k(a)[0]}var i=b,j={_id:"VIEWPORT",nodeType:1},k=a("$"),l=a("../bom/browser"),m=!1,n=l.ie6;i.pin=function(a,b){a=c(a),b=c(b);var e=k(a.element);"fixed"!==e.css("position")||n?(e.css("position","absolute"),m=!1):m=!0,d(a),d(b);var g=f(e),h=b.offset(),i=h.top+b.y-a.y-g.top,j=h.left+b.x-a.x-g.left;e.css({left:j,top:i})},i.center=function(a,b){i.pin({element:a,x:"50%",y:"50%"},{element:b,x:"50%",y:"50%"})},i.VIEWPORT=j}),define("dist/lib/util/dom/iframe-shim",["$","./position","../bom/browser"],function(a,b,c){function d(a){this.target=f(a).eq(0)}function e(a){var b={display:"none",border:"none",opacity:0,position:"absolute"},c=a.css("zIndex");return c&&c>0&&(b.zIndex=c-1),f("<iframe>",{src:"about:blank",frameborder:0,css:b}).insertBefore(a)}var f=a("$"),g=a("./position"),h=-1!==(window.navigator.userAgent||"").toLowerCase().indexOf("msie 6");if(d.prototype.sync=function(){var a=this.target,b=this.iframe;if(!a.length)return this;var c=a.outerHeight(),d=a.outerWidth();return c&&d&&!a.is(":hidden")?(b||(b=this.iframe=e(a)),b.css({height:c,width:d}),g.pin(b[0],a[0]),b.show()):b&&b.hide(),this},d.prototype.destroy=function(){this.iframe&&(this.iframe.remove(),delete this.iframe),delete this.target},h)c.exports=d;else{var i=function(){};i.prototype.sync=function(){return this},i.prototype.destroy=i,c.exports=i}}),define("dist/lib/cmp/widget",["../util/base","../util/class","../util/event","../util/aspect","../util/attribute","$","./daparser","./auto-render"],function(a,b,c){function d(){return"widget-"+w++}function e(a){return"[object String]"===v.call(a)}function f(a){return"[object Function]"===v.call(a)}function g(a){return x(document.documentElement,a)}function h(a){return a.charAt(0).toUpperCase()+a.substring(1)}function i(a){return f(a.events)&&(a.events=a.events()),a.events}function j(a,b){var c=a.match(y),d=c[1]+q+b.cid,e=c[2]||void 0;return e&&e.indexOf("{{")>-1&&(e=k(e,b)),{type:d,selector:e}}function k(a,b){return a.replace(z,function(a,c){for(var d,f=c.split("."),g=b;d=f.shift();)g=g===b.attrs?b.get(d):g[d];return e(g)?g:A})}function l(a){return null==a||void 0===a}var m=a("../util/base"),n=a("$"),o=a("./daparser"),p=a("./auto-render"),q=".delegate-events-",r="_onRender",s="data-widget-cid",t={},u=m.extend({propsInAttrs:["initElement","element","events"],element:null,events:null,attrs:{id:null,className:null,style:null,template:"<div></div>",model:null,parentNode:document.body},initialize:function(a){this.cid=d();var b=this._parseDataAttrsConfig(a);u.superclass.initialize.call(this,a?n.extend(b,a):b),this.parseElement(),this.initProps(),this.delegateEvents(),this.setup(),this._stamp(),this._isTemplate=!(a&&a.element)},_parseDataAttrsConfig:function(a){var b,c;return a&&(b=n(a.initElement?a.initElement:a.element)),b&&b[0]&&!p.isDataApiOff(b)&&(c=o.parseElement(b)),c},parseElement:function(){var a=this.element;if(a?this.element=n(a):this.get("template")&&this.parseElementFromTemplate(),!this.element||!this.element[0])throw new Error("element is invalid")},parseElementFromTemplate:function(){this.element=n(this.get("template"))},initProps:function(){},delegateEvents:function(a,b,c){if(0===arguments.length?(b=i(this),a=this.element):1===arguments.length?(b=a,a=this.element):2===arguments.length?(c=b,b=a,a=this.element):(a||(a=this.element),this._delegateElements||(this._delegateElements=[]),this._delegateElements.push(n(a))),e(b)&&f(c)){var d={};d[b]=c,b=d}for(var g in b)if(b.hasOwnProperty(g)){var h=j(g,this),k=h.type,l=h.selector;!function(b,c){var d=function(a){return f(b)?b.call(c,a):c[b](a)};l?n(a).on(k,l,d):n(a).on(k,d)}(b[g],this)}return this},undelegateEvents:function(a,b){if(b||(b=a,a=null),0===arguments.length){var c=q+this.cid;if(this.element&&this.element.off(c),this._delegateElements)for(var d in this._delegateElements)this._delegateElements.hasOwnProperty(d)&&this._delegateElements[d].off(c)}else{var e=j(b,this);a?n(a).off(e.type,e.selector):this.element&&this.element.off(e.type,e.selector)}return this},setup:function(){},render:function(){this.rendered||(this._renderAndBindAttrs(),this.rendered=!0);var a=this.get("parentNode");if(a&&!g(this.element[0])){var b=this.constructor.outerBoxClass;if(b){var c=this._outerBox=n("<div></div>").addClass(b);c.append(this.element).appendTo(a)}else this.element.appendTo(a)}return this},_renderAndBindAttrs:function(){var a=this,b=a.attrs;for(var c in b)if(b.hasOwnProperty(c)){var d=r+h(c);if(this[d]){var e=this.get(c);l(e)||this[d](e,void 0,c),function(b){a.on("change:"+c,function(c,d,e){a[b](c,d,e)})}(d)}}},_onRenderId:function(a){this.element.attr("id",a)},_onRenderClassName:function(a){this.element.addClass(a)},_onRenderStyle:function(a){this.element.css(a)},_stamp:function(){var a=this.cid;(this.initElement||this.element).attr(s,a),t[a]=this},$:function(a){return this.element.find(a)},destroy:function(){this.undelegateEvents(),delete t[this.cid],this.element&&this._isTemplate&&(this.element.off(),this._outerBox?this._outerBox.remove():this.element.remove()),this.element=null,u.superclass.destroy.call(this)}});n(window).unload(function(){for(var a in t)t[a].destroy()}),u.query=function(a){var b,c=n(a).eq(0);return c&&(b=c.attr(s)),t[b]},u.autoRender=p.autoRender,u.autoRenderAll=p.autoRenderAll,u.StaticsWhiteList=["autoRender"],c.exports=u;var v=Object.prototype.toString,w=0,x=n.contains||function(a,b){return!!(16&a.compareDocumentPosition(b))},y=/^(\S+)\s*(.*)$/,z=/{{([^}]+)}}/g,A="INVALID_SELECTOR"}),define("dist/lib/cmp/daparser",["$"],function(a,b){function c(a){return a.toLowerCase().replace(g,function(a,b){return(b+"").toUpperCase()})}function d(a){for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];if("string"!=typeof c)continue;h.test(c)?(c=c.replace(/'/g,'"'),a[b]=d(i(c))):a[b]=e(c)}return a}function e(a){if("false"===a.toLowerCase())a=!1;else if("true"===a.toLowerCase())a=!0;else if(/\d/.test(a)&&/[^a-z]/i.test(a)){var b=parseFloat(a);b+""===a&&(a=b)}return a}var f=a("$");b.parseElement=function(a,b){a=f(a)[0];var e={};if(a.dataset)e=f.extend({},a.dataset);else for(var g=a.attributes,h=0,i=g.length;i>h;h++){var j=g[h],k=j.name;0===k.indexOf("data-")&&(k=c(k.substring(5)),e[k]=j.value)}return b===!0?e:d(e)};var g=/-([a-z])/g,h=/^\s*[\[{].*[\]}]\s*$/,i=this.JSON?JSON.parse:f.parseJSON}),define("dist/lib/cmp/auto-render",["$"],function(a,b){var c=a("$"),d="data-widget-auto-rendered";b.autoRender=function(a){return new this(a).render()},b.autoRenderAll=function(a,e){"function"==typeof a&&(e=a,a=null),a=c(a||document.body);var f=[],g=[];a.find("[data-widget]").each(function(a,c){b.isDataApiOff(c)||(f.push(c.getAttribute("data-widget").toLowerCase()),g.push(c))}),f.length&&seajs.use(f,function(){for(var a=0;a<arguments.length;a++){var b=arguments[a],f=c(g[a]);if(!f.attr(d)){var h={initElement:f,renderType:"auto"},i=f.attr("data-widget-role");h[i?i:"element"]=f,b.autoRender&&b.autoRender(h),f.attr(d,"true")}}e&&e()})};var e="off"===c(document.body).attr("data-api");b.isDataApiOff=function(a){var b=c(a).attr("data-api");return"off"===b||"on"!==b&&e}}),define("dist/lib/cmp/mask",["$","./overlay","../util/dom/position","../util/bom/browser","../util/dom/iframe-shim","./widget","../util/base","../util/class","../util/event","../util/aspect","../util/attribute","./daparser","./auto-render"],function(a,b,c){var d=a("$"),e=a("./overlay"),f=(window.navigator.userAgent||"").toLowerCase(),g=-1!==f.indexOf("msie 6"),h=d(document.body),i=d(document),j=[],k=e.extend({attrs:{width:g?i.outerWidth(!0):"100%",height:g?i.outerHeight(!0):"100%",className:"dialog-mask",opacity:.2,backgroundColor:"#000",style:{position:g?"absolute":"fixed",top:0,left:0},align:{baseElement:g?h:void 0}},show:function(){return g&&(this.set("width",i.outerWidth(!0)),this.set("height",i.outerHeight(!0))),k.superclass.show.call(this)},setup:function(){this._setupShim(),this.before("show",function(){j.push(this.get("zIndex"))})},hide:function(){return j.pop(),j.length>0?(this.set("zIndex",j[j.length-1]),this):k.superclass.hide.call(this)},_onRenderBackgroundColor:function(a){this.element.css("backgroundColor",a)},_onRenderOpacity:function(a){this.element.css("opacity",a)}});c.exports=new k}),define("dist/lib/util/dom/sticky",["$"],function(a,b,c){function d(a,b,c){return new g({element:a,marginTop:b||0,callback:c}).render()}function e(){return!n}function f(){if(m)return!1;var a=i[0].body;if(i[0].createElement&&a&&a.appendChild&&a.removeChild){var b,c=i[0].createElement("div"),d=function(a){return window.getComputedStyle?window.getComputedStyle(c).getPropertyValue(a):c.currentStyle.getAttribute(a)};a.appendChild(c);for(var e=0;e<j.length&&(c.style.cssText="position:"+j[e]+"sticky;visibility:hidden;",!(b=-1!==d("position").indexOf("sticky")));e++);return c.parentNode.removeChild(c),b}}function g(a){this.options=a||{},this.elem=h(this.options.element),this.callback=a.callback||function(){},this.marginTop=a.marginTop||0,this._stickyId=k++}var h=a("$"),i=h(document),j=["-webkit-","-ms-","-o-","-moz-",""],k=0,l=(window.navigator.userAgent||"").toLowerCase(),m=-1!==l.indexOf("msie"),n=-1!==l.indexOf("msie 6"),o=f(),p=e();d.stick=d,d.fix=function(a){return new g({element:a,marginTop:Number.MAX_VALUE}).render()},d.isPositionStickySupported=o,d.isPositionFixedSupported=p,g.prototype.render=function(){var a,b=this;if(this.elem.length&&!this.elem.data("bind-sticked")){this._originTop=this.elem.offset().top,this.marginTop===Number.MAX_VALUE&&(a=!0,this.marginTop=this._originTop),this._originStyles={position:null,top:null,left:null};for(var c in this._originStyles)this._originStyles.hasOwnProperty(c)&&(this._originStyles[c]=this.elem.css(c));var e;if(d.isPositionStickySupported&&!a){e=this._supportSticky;for(var f="",g=0;g<j.length;g++)f+="position:"+j[g]+"sticky;";this.elem[0].style.cssText+=f+"top: "+this.marginTop+"px;"}else d.isPositionFixedSupported?e=this._supportFixed:(e=this._supportAbsolute,h('<style type="text/css"> * html{ background:url(null) no-repeat fixed; } </style>').appendTo("head"));return e.call(this),h(window).on("scroll."+this._stickyId,function(){b.elem.is(":visible")&&e.call(b)}),this.elem.data("bind-sticked",!0),this}},g.prototype._supportFixed=function(){var a=this._originTop-i.scrollTop();!this.elem.data("sticked")&&a<=this.marginTop?(this._addPlaceholder(),this.elem.css({position:"fixed",top:this.marginTop,left:this.elem.offset().left}),this.elem.data("sticked",!0),this.callback.call(this,!0)):this.elem.data("sticked")&&a>this.marginTop&&this._restore()},g.prototype._supportAbsolute=function(){var a=this._originTop-i.scrollTop();a<=this.marginTop?(this.elem.data("sticked")||(this._addPlaceholder(),this.elem.data("sticked",!0),this.callback.call(this,!0)),this.elem.css({position:"absolute",top:this.marginTop+i.scrollTop()})):this.elem.data("sticked")&&a>this.marginTop&&this._restore()},g.prototype._supportSticky=function(){var a=this._originTop-i.scrollTop();!this.elem.data("sticked")&&a<=this.marginTop?(this.elem.data("sticked",!0),this.callback.call(this,!0)):this.elem.data("sticked")&&a>this.marginTop&&this.callback.call(this,!1)},g.prototype._restore=function(){this._removePlaceholder(),this.elem.css(this._originStyles),this.elem.data("sticked",!1),this.callback.call(this,!1)},g.prototype._addPlaceholder=function(){var a=!1,b=this.elem.css("position");("static"===b||"relative"===b)&&(a=!0),"block"!==this.elem.css("display")&&(a=!1),a&&(this._placeholder=h('<div style="visibility:hidden;margin:0;padding:0;"></div>'),this._placeholder.width(this.elem.outerWidth(!0)).height(this.elem.outerHeight(!0)).css("float",this.elem.css("float")).insertAfter(this.elem))},g.prototype._removePlaceholder=function(){this._placeholder&&this._placeholder.remove()},g.prototype.destroy=function(){this._restore(),this.elem.data("bind-sticked",!1),h(window).off("scroll."+this._stickyId)},c.exports=d}),define("dist/lib/util/dom/scroll",["$","./wheel","../bom/browser"],function(a,b,c){var d=a("$"),e=a("./wheel"),f={detect:function(a){var b,c,e;return a===window||a===document?(c=d(document).scrollTop(),a=document.documentElement):c=a.scrollTop,e=Math.ceil(a.clientHeight),0===c?b=a.scrollHeight>Math.ceil(e)?"top":"noscroll":c+Math.ceil(e)>=a.scrollHeight&&(b="bottom"),b}},g={to:function(a,b){(a===window||a===document||a===document.body)&&(a=document.documentElement),a=a[0]||a,"top"===b?b=0:"bottom"===b&&(b=a.scrollHeight),a.scrollTop=b},prevent:function(a,b){a=a[0]||a,e(a,function(c,d,e,g){var h=f.detect(a);a===c.target&&("ie"===g||"noscroll"===h||"top"===h&&"up"===d||"bottom"===h&&"down"===d)&&(e(),b&&b.call(a,c,h))})},listen:function(a,b,c){var e={},h=d(a).scrollTop(),i=function(c,g){if(g){var h=f.detect(a),i=d(a).scrollTop();e.bottom=(a===document?document.body:a).scrollHeight-parseFloat(a===document?document.documentElement.clientHeight:a.clientHeight),b.other&&b.other(c,i,g,e),h&&(b.top&&"top"===h&&"up"===g&&b.top(c,i,g,e),b.bottom&&"bottom"===h&&"down"===g&&b.bottom(c,i,g,e))}};a=a[0]||a,a=a===document||a===document.body?window:a,d(a).scroll(function(b){var c=d(a).scrollTop(),e=c>h?"down":h>c?"up":"";h=c,e&&i(b.originalEvent,e)}),a!==window&&c!==!1&&g.prevent(a)}};c.exports=g}),define("dist/lib/util/dom/wheel",["../bom/browser"],function(a,b,c){var d=a("../bom/browser");c.exports=function(a,b){a=a[0]||a,d.ie?a.attachEvent("onmousewheel",function(c){c=window.event;var d=function(){a.scrollTop+=c.wheelDelta>0?-60:60,c.returnValue=!1};b&&b.call(a,c,c.wheelDelta>0?"up":"down",d,"ie")}):d.firefox?a.addEventListener("DOMMouseScroll",function(c){b&&b.call(a,c,c.detail<0?"up":c.detail>0?"down":"",function(){c.preventDefault()},"firefox")},!1):a.addEventListener("mousewheel",function(c){b&&b.call(a,c,c.wheelDelta>=0?"up":c.wheelDelta<=0?"down":"",function(){c.returnValue=!1},"standard")},!1)}}),define("dist/lib/cmp/dialog/tpl/dialog",[],function(){return{render:function(a){var b=[],c=[];for(var d in a)b.push(d),c.push(a[d]);return new Function(b,'var _s=[];_s.push(\' <div class="widget-dialog"> <a href="#" data-action="close" data-role="close" title="关闭" class="dialog-close">×</a> <div class="header"> <div class="title" data-role="title"></div> </div> <div class="main"> <div class="content" data-role="content"></div> </div> <div class="footer"> <div class="buttons" data-role="buttons"></div> </div> </div>\'); return _s;').apply(null,c).join("")}}}),define("dist/app/design/scene",["$","./compimg","./resize","../../lib/cmp/smartmenu","../../lib/util/dom/dnd","../../lib/util/base","../../lib/util/class","../../lib/util/event","../../lib/util/aspect","../../lib/util/attribute","./menu","./styleobj","../../lib/util/dom/action","./css","../../lib/util/bom/browser","./drag","./range","./colorpicker","./menufunc","../../lib/cmp/dialog/dialog","../../lib/cmp/overlay","../../lib/util/dom/position","../../lib/util/dom/iframe-shim","../../lib/cmp/widget","../../lib/cmp/daparser","../../lib/cmp/auto-render","../../lib/cmp/mask","../../lib/util/dom/sticky","../../lib/util/dom/scroll","../../lib/util/dom/wheel","../../lib/cmp/dialog/tpl/dialog","./data"],function(a,b,c){function d(){if(window.cloneNode){var a=window.cloneNode;a.container=".design",a.top=window.parseInt(a.top)+30,a.zIndex=window.parseInt(a.zIndex)+1,new f(a)}}var e=a("$"),f=a("./compimg"),g=a("./css"),h=a("./data");a("../../lib/cmp/smartmenu");var i=e("#pageManage"),j=e(".design"),k='<li data-action="changeScene"><span class="number">1</span><span class="text" data-action="textModify">第1页</span></li>',l={init:function(){var a=h.loadFirstData();this.pageManageInit(a),this.containerInit(a[0])},pageManageInit:function(a){var b=i.find(".content-list");b.html(""),e.each(a,function(a,c){var d=e(k);0==a?d.addClass("active"):"",d.find(".number").text(c.num),d.find(".text").text(c.name),d.attr("data-scene-id",c.sceneId).attr("data-page-id",c.id),b.append(d)}),j.smartMenu([[{text:"粘贴",func:d}]],{name:"design"})},containerInit:function(a){a.scene&&a.scene.image.imgSrc&&"none"!=a.scene.image.imgSrc?j.css({"background-image":"url("+a.scene.image.imgSrc+")"}):j.css("background",a.scene.image.background),j.html("").attr("data-scene-id",a.sceneId).attr("data-page-id",a.id),e.each(a.elements||[],function(a,b){b.content&&new f({container:".design",id:"CompImg-"+b.id,width:b.css.width,height:b.css.height,src:b.content,top:b.css.top,left:b.css.left,dataId:b.id,background:b.css.background,opacity:b.css.opacity,borderWidth:b.css.borderWidth,borderRadius:b.css.borderRadius,borderType:b.css.borderType,borderColor:b.css.borderColor,transform:b.css.transform,shadowSize:b.css.shadowSize,shadowOffset:b.css.shadowOffset,shadowColor:b.css.shadowColor,animateType:b.css.animateType,animateTime:b.css.animateTime,animateDelay:b.css.animateDelay,animateTimes:b.css.animateTimes,animateInfinite:b.css.animateInfinite})})},onePageContentCreate:function(){var a=h.newPageContent(),b=i.find(".content-list"),c=e(k);c.find(".number").text(a.num),c.find(".text").text(a.name),c.attr("data-scene-id",a.sceneId).attr("data-page-id",a.id),b.append(c),c.click()},changePage:function(a,b){this.onePageContentSave(a);var c=h.findPageByPageId(b.attr("data-page-id"));this.containerInit(c)},onePageContentSave:function(a){var b=j,c=b.attr("data-scene-id"),d=b.attr("data-page-id"),f=[],i={id:d,sceneId:c};e.each(b.find("li"),function(){var a=e(this),b={css:{}};b.css=new g(this).getStyle(),b.content=a.find("img").attr("src"),a.attr("data-id")&&(b.id=a.attr("data-id")),f.push(b)}),i.name=a.find(".text").text(),i.num=a.find(".number").text(),i.elements=f,i.scene={image:{}};var k=j.css("background-image").trim();i.scene.image.imgSrc=k.replace(/url\(([^\)]+)\).*/gi,"$1"),i.scene.image.background=j.css("background-color"),h.savePageContent(i)},deletePage:function(a){var b=a.attr("data-page-id");this.pageManageInit(h.deletePageByPageId(b))},clonePage:function(a){this.onePageContentSave(a);var b=a.attr("data-page-id");this.pageManageInit(h.clonePageByPageId(b))}};e(document).bind("keydown",function(a){if(67==a.keyCode&&a.ctrlKey){var b=j.find("li.selected");b.size()>0&&(window.cloneNode=new g(b[0]).getStyle())}else 86==a.keyCode&&a.ctrlKey&&d()}),c.exports=l}),define("dist/app/design/data",[],function(a,b,c){var d={},e=0,f=0,g=1,h=[{id:f++,sceneId:e,num:g++,name:"第1页",elements:[],scene:{id:e,name:"2222",createUser:"4a2d8aae4b14dcd7014b294902a64c24",createTime:1422327309e3,image:{background:"white"}}}];d={loadFirstData:function(){var a=JSON.parse(localStorage.getItem("scene"));if(a){g=a.length+1;for(var b=0;b<a.length;b++)f=Math.max(f,a[b].id);return f+=1,a}return localStorage.setItem("scene",JSON.stringify(h)),h},newPageContent:function(){var a=JSON.parse(localStorage.getItem("scene")),b={id:f++,sceneId:e,num:g,name:"第"+g++ +"页",elements:[],scene:{id:e,name:"2222",createUser:"4a2d8aae4b14dcd7014b294902a64c24",createTime:1422327309e3,image:{background:"white"}}};return a.push(b),localStorage.setItem("scene",JSON.stringify(a)),b},savePageContent:function(a){for(var b=JSON.parse(localStorage.getItem("scene")),c=0;c<b.length;c++)b[c].id==a.id&&(b[c]=a);localStorage.setItem("scene",JSON.stringify(b))},findPageByPageId:function(a){for(var b=JSON.parse(localStorage.getItem("scene")),c=0;c<b.length;c++)if(b[c].id==a)return b[c]},deletePageByPageId:function(a){for(var b=JSON.parse(localStorage.getItem("scene")),c=[],d=1,e=0;e<b.length;e++)b[e].id!=a&&(b[e].num=d++,c.push(b[e]));return g--,localStorage.setItem("scene",JSON.stringify(c)),c},clonePageByPageId:function(a){console.log(a);for(var b=JSON.parse(localStorage.getItem("scene")),c=1,e=0,h=b.length;h>e;e++)if(b[e].num=c++,b[e].id==a){var i=d.cloneObj(b[e]);i.num=g++,i.id=f++,b.push(i)}for(var j="",e=0,h=b.length;h>e;e++)j+=" "+b[e].num;return console.log(j),localStorage.setItem("scene",JSON.stringify(b)),b},cloneObj:function(a){var b;switch(typeof a){case"undefined":break;case"string":b=a+"";break;case"number":b=a-0;break;case"boolean":b=a;break;case"object":if(null===a)b=null;else if(a instanceof Array){b=[];for(var c=0,d=a.length;d>c;c++)b.push(this.cloneObj(a[c]))}else{b={};for(var e in a)b[e]=this.cloneObj(a[e])}break;default:b=a}return b}},c.exports=d}),define("dist/lib/util/dom/sortable",["$","../base","../class","../event","../aspect","../attribute","./dnd"],function(a,b,c){function d(a,b){var c,d,g,h,i=a.offset(),j=i.left+a.outerWidth()/2,k=i.top+a.outerHeight()/2,l="top";return b.each(function(a,b){b=f(b);var i=b.offset(),m=i.left+b.outerWidth()/2,n=i.top+b.outerHeight()/2;h===e?h=i.top:h===i.top&&(l="left");var o=Math.pow(m-j,2)+Math.pow(n-k,2);(!d||d>o)&&(d=o,g=b,c=i)}),{item:g,position:i[l]<c[l]?"before":"after"}}var e,f=a("$"),g=a("../base"),h=a("./dnd"),i=g.extend({attrs:{element:{getter:function(a){return"string"==typeof a?f(a):a?a:null}},item:"",handler:null,connect:null,placeholder:null,proxy:null,proxyParent:null,connectSelf:!0,animate:!1},initialize:function(){var a=this;i.superclass.initialize.apply(this,arguments);var b,c,e="string"==typeof this.get("item")?this.get("element").find(this.get("item")):this.get("item"),g={element:e,handler:this.get("handler"),visible:this.get("visible"),proxy:this.get("proxy"),proxyParent:this.get("proxyParent"),drop:function(){var a=[],b=this.get("connect");return b&&f(b).each(function(b,c){a.push(f(c))}),this.get("connectSelf")!==!1&&a.push(this.get("element")),a}.call(this),position:e.eq(0).css("position")||"static",animate:this.get("animate")};this.dnd=new h(g).on("beforedrag",function(b){return a.trigger("beforedrag",b)}).on("dragstart",function(d,e,g,h){var i=a.get("placeholder");c=null,f.isFunction(i)?b=i.call(a,this.element):(b=a.get("placeholder")||this.element.clone().empty().css({visibility:"visible",border:"1px dashed #ddd",background:"#fff"}),this.element.hide().after(b)),b.data("placeholder",!0),a.trigger("dragstart",d,e,g,h)}).on("drag",function(e,f,g){var h=this.get("proxy");if(f){b.show(),c=f;var i=f.find(a.get("item"));i=i.filter(function(a){var b=i.eq(a);return!b.data("proxy")});var j=i.length;if(0===j)f.append(b);else{var k=d(h,i);k.item[k.position](b)}}else{var l=this.element;a.get("connectSelf")?l.after(b):b.hide()}a.trigger("drag",e,f,g)}).on("dragenter",function(b,c,d){a.trigger("dragenter",b,c,d)}).on("dragover",function(b,c,d){a.trigger("dragover",b,c,d)}).on("dragleave",function(b,c,d){a.trigger("dragleave",b,c,d)}).on("dragend",function(d,e,g){if(e){var h=a.get("dropped"),i=!1;if(h=f(f.isFunction(h)?h.apply(a,arguments):h),h&&h[0]?(b.replaceWith(h),c&&(c[0]!==a.get("element")[0]?c.data("dnd")&&c.data("dnd").render(h):i=!0,c=null)):i=!0,i){var j=this.element.css("position",this.element.data("style").position||"").show();b.replaceWith(j),c&&c[0]!==a.get("element")[0]&&(a.dnd.destroy(a.get("handler")?j.find(a.get("handler")):j),c.data("dnd")&&c.data("dnd").render(j),c=null)}}else b.remove();a.trigger("dragend",d,e,g)}).on("drop",function(b,c,d,e){a.trigger("drop",b,c,d,e)}),this.get("element").data("dnd",this.dnd)}});c.exports=i});